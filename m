Return-Path: <iommu-bounces@lists.linux-foundation.org>
X-Original-To: lists.iommu@lfdr.de
Delivered-To: lists.iommu@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id A7995E704C
	for <lists.iommu@lfdr.de>; Mon, 28 Oct 2019 12:22:02 +0100 (CET)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id E6E7010BE;
	Mon, 28 Oct 2019 11:21:03 +0000 (UTC)
X-Original-To: iommu@lists.linux-foundation.org
Delivered-To: iommu@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 09FF3B09
	for <iommu@lists.linux-foundation.org>;
	Mon, 28 Oct 2019 08:29:14 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mailgw02.mediatek.com (unknown [210.61.82.184])
	by smtp1.linuxfoundation.org (Postfix) with ESMTP id D171242D
	for <iommu@lists.linux-foundation.org>;
	Mon, 28 Oct 2019 08:29:12 +0000 (UTC)
X-UUID: 0e39026cefce4203bc75cfa52669e7a8-20191028
X-UUID: 0e39026cefce4203bc75cfa52669e7a8-20191028
Received: from mtkexhb02.mediatek.inc [(172.21.101.103)] by
	mailgw02.mediatek.com (envelope-from <chao.hao@mediatek.com>)
	(Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
	with ESMTP id 1810340121; Mon, 28 Oct 2019 16:29:09 +0800
Received: from mtkcas08.mediatek.inc (172.21.101.126) by
	mtkmbs06n1.mediatek.inc (172.21.101.129) with Microsoft SMTP Server
	(TLS) id 15.0.1395.4; Mon, 28 Oct 2019 16:29:08 +0800
Received: from localhost.localdomain (10.15.20.246) by mtkcas08.mediatek.inc
	(172.21.101.73) with Microsoft SMTP Server id 15.0.1395.4 via Frontend
	Transport; Mon, 28 Oct 2019 16:29:04 +0800
From: Chao Hao <chao.hao@mediatek.com>
To: Joerg Roedel <joro@8bytes.org>, Rob Herring <robh+dt@kernel.org>, Matthias
	Brugger <matthias.bgg@gmail.com>
Subject: [PATCH 11/13] iommu/mediatek: Add iova reserved function
Date: Mon, 28 Oct 2019 16:28:18 +0800
Message-ID: <20191028082820.20221-12-chao.hao@mediatek.com>
X-Mailer: git-send-email 2.18.0
In-Reply-To: <20191028082820.20221-1-chao.hao@mediatek.com>
References: <20191028082820.20221-1-chao.hao@mediatek.com>
MIME-Version: 1.0
X-Spam-Status: No, score=-0.2 required=5.0 tests=BAYES_00,HTML_MESSAGE,
	MAY_BE_FORGED, MIME_BASE64_TEXT,
	UNPARSEABLE_RELAY autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
X-Mailman-Approved-At: Mon, 28 Oct 2019 11:21:00 +0000
Cc: Anan Sun <anan.sun@mediatek.com>, devicetree@vger.kernel.org,
	Cui Zhang <cui.zhang@mediatek.com>,
	Jun Yan <jun.yan@mediatek.com>, wsd_upstream@mediatek.com,
	linux-kernel@vger.kernel.org, Chao Hao <chao.hao@mediatek.com>,
	iommu@lists.linux-foundation.org, linux-mediatek@lists.infradead.org,
	Miles Chen <miles.chen@mediatek.com>, linux-arm-kernel@lists.infradead.org,
	Guangming Cao <guangming.cao@mediatek.com>
X-BeenThere: iommu@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Development issues for Linux IOMMU support
	<iommu.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/iommu>,
	<mailto:iommu-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/iommu/>
List-Post: <mailto:iommu@lists.linux-foundation.org>
List-Help: <mailto:iommu-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/iommu>,
	<mailto:iommu-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============3934343908229643289=="
Sender: iommu-bounces@lists.linux-foundation.org
Errors-To: iommu-bounces@lists.linux-foundation.org

--===============3934343908229643289==
Content-Type: multipart/alternative;
	boundary="__=_Part_Boundary_009_60630689.1844628106"

--__=_Part_Boundary_009_60630689.1844628106
Content-Type: text/html
Content-Transfer-Encoding: base64

PHByZT4NCkZvciBtdWx0aXBsZSBpb21tdV9kb21haW5zLCB3ZSBuZWVkIHRvIHJlc2VydmUgc29t
ZSBpb3ZhDQpyZWdpb25zLCBzbyB3ZSB3aWxsIGFkZCBtdGtfaW9tbXVfcmVzdl9pb3ZhX3JlZ2lv
biBzdHJ1Y3R1cmUuDQpJdCBpbmNsdWRlcyB0aGUgc3RhcnQgYWRkcmVzcyBhbmQgc2l6ZSBvZiBp
b3ZhIGFuZCBpb21tdV9yZXN2X3R5cGUuDQpCYXNlZCBvbiB0aGUgZnVuY3Rpb24sIHdlIHdpbGwg
cmVhbGl6ZSBtdWx0aXBsZSBtdGtfaW9tbXVfZG9tYWlucw0KDQpTaWduZWQtb2ZmLWJ5OiBBbmFu
IFN1biAmbHQ7YW5hbi5zdW5AbWVkaWF0ZWsuY29tJmd0Ow0KU2lnbmVkLW9mZi1ieTogQ2hhbyBI
YW8gJmx0O2NoYW8uaGFvQG1lZGlhdGVrLmNvbSZndDsNCi0tLQ0KIGRyaXZlcnMvaW9tbXUvbXRr
X2lvbW11LmMgfCA0NyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysNCiBk
cml2ZXJzL2lvbW11L210a19pb21tdS5oIHwgMTIgKysrKysrKysrKw0KIDIgZmlsZXMgY2hhbmdl
ZCwgNTkgaW5zZXJ0aW9ucygrKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9pb21tdS9tdGtfaW9t
bXUuYyBiL2RyaXZlcnMvaW9tbXUvbXRrX2lvbW11LmMNCmluZGV4IDhjMDZkMmE3OTNhNy4uYzBj
ZDdkYTcxYzJjIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuYw0KKysrIGIv
ZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuYw0KQEAgLTY5Nyw2ICs2OTcsNTEgQEAgc3RhdGljIGlu
dCBtdGtfaW9tbXVfb2ZfeGxhdGUoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3Qgb2ZfcGhhbmRs
ZV9hcmdzICphcmdzKQ0KIAlyZXR1cm4gaW9tbXVfZndzcGVjX2FkZF9pZHMoZGV2LCBhcmdzLSZn
dDthcmdzLCAxKTsNCiB9DQogDQorLyogcmVzZXJ2ZS9kaXItbWFwIGlvdmEgcmVnaW9uICovDQor
c3RhdGljIHZvaWQgbXRrX2lvbW11X2dldF9yZXN2X3JlZ2lvbnMoc3RydWN0IGRldmljZSAqZGV2
LA0KKwkJCQkgICAgICAgc3RydWN0IGxpc3RfaGVhZCAqaGVhZCkNCit7DQorCXN0cnVjdCBtdGtf
aW9tbXVfZGF0YSAqZGF0YSA9IGRldl9pb21tdV9md3NwZWNfZ2V0KGRldiktJmd0O2lvbW11X3By
aXY7DQorCXVuc2lnbmVkIGludCBpLCB0b3RhbF9jbnQgPSBkYXRhLSZndDtwbGF0X2RhdGEtJmd0
O3Jlc3ZfY250Ow0KKwljb25zdCBzdHJ1Y3QgbXRrX2lvbW11X3Jlc3ZfaW92YV9yZWdpb24gKnJl
c3ZfZGF0YTsNCisJc3RydWN0IGlvbW11X3Jlc3ZfcmVnaW9uICpyZWdpb247DQorCXVuc2lnbmVk
IGxvbmcgYmFzZSA9IDA7DQorCXNpemVfdCBzaXplID0gMDsNCisJaW50IHByb3QgPSBJT01NVV9X
UklURSB8IElPTU1VX1JFQUQ7DQorDQorCXJlc3ZfZGF0YSA9IGRhdGEtJmd0O3BsYXRfZGF0YS0m
Z3Q7cmVzdl9yZWdpb247DQorDQorCWZvciAoaSA9IDA7IGkgJmx0OyB0b3RhbF9jbnQ7IGkrKykg
ew0KKwkJc2l6ZSA9IDA7DQorCQlpZiAocmVzdl9kYXRhW2ldLmlvdmFfc2l6ZSkgew0KKwkJCWJh
c2UgPSAodW5zaWduZWQgbG9uZylyZXN2X2RhdGFbaV0uaW92YV9iYXNlOw0KKwkJCXNpemUgPSBy
ZXN2X2RhdGFbaV0uaW92YV9zaXplOw0KKwkJfQ0KKwkJaWYgKCFzaXplKQ0KKwkJCWNvbnRpbnVl
Ow0KKw0KKwkJcmVnaW9uID0gaW9tbXVfYWxsb2NfcmVzdl9yZWdpb24oYmFzZSwgc2l6ZSwgcHJv
dCwNCisJCQkJCQkgcmVzdl9kYXRhW2ldLnR5cGUpOw0KKwkJaWYgKCFyZWdpb24pDQorCQkJcmV0
dXJuOw0KKw0KKwkJbGlzdF9hZGRfdGFpbCgmYW1wO3JlZ2lvbi0mZ3Q7bGlzdCwgaGVhZCk7DQor
DQorCQlkZXZfZGJnKGRhdGEtJmd0O2RldiwgJnF1b3Q7JXMgaW92YSAweCV4IH4gMHgleFxuJnF1
b3Q7LA0KKwkJCShyZXN2X2RhdGFbaV0udHlwZSA9PSBJT01NVV9SRVNWX0RJUkVDVCkgPyAmcXVv
dDtkbSZxdW90OyA6ICZxdW90O3JzdiZxdW90OywNCisJCQkodW5zaWduZWQgaW50KWJhc2UsICh1
bnNpZ25lZCBpbnQpKGJhc2UgKyBzaXplIC0gMSkpOw0KKwl9DQorfQ0KKw0KK3N0YXRpYyB2b2lk
IG10a19pb21tdV9wdXRfcmVzdl9yZWdpb25zKHN0cnVjdCBkZXZpY2UgKmRldiwNCisJCQkJICAg
ICAgIHN0cnVjdCBsaXN0X2hlYWQgKmhlYWQpDQorew0KKwlzdHJ1Y3QgaW9tbXVfcmVzdl9yZWdp
b24gKmVudHJ5LCAqbmV4dDsNCisNCisJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKGVudHJ5LCBu
ZXh0LCBoZWFkLCBsaXN0KQ0KKwkJa2ZyZWUoZW50cnkpOw0KK30NCisNCiBzdGF0aWMgY29uc3Qg
c3RydWN0IGlvbW11X29wcyBtdGtfaW9tbXVfb3BzID0gew0KIAkuZG9tYWluX2FsbG9jCT0gbXRr
X2lvbW11X2RvbWFpbl9hbGxvYywNCiAJLmRvbWFpbl9mcmVlCT0gbXRrX2lvbW11X2RvbWFpbl9m
cmVlLA0KQEAgLTcxMSw2ICs3NTYsOCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGlvbW11X29wcyBt
dGtfaW9tbXVfb3BzID0gew0KIAkucmVtb3ZlX2RldmljZQk9IG10a19pb21tdV9yZW1vdmVfZGV2
aWNlLA0KIAkuZGV2aWNlX2dyb3VwCT0gbXRrX2lvbW11X2RldmljZV9ncm91cCwNCiAJLm9mX3hs
YXRlCT0gbXRrX2lvbW11X29mX3hsYXRlLA0KKwkuZ2V0X3Jlc3ZfcmVnaW9ucyA9IG10a19pb21t
dV9nZXRfcmVzdl9yZWdpb25zLA0KKwkucHV0X3Jlc3ZfcmVnaW9ucyA9IG10a19pb21tdV9wdXRf
cmVzdl9yZWdpb25zLA0KIAkucGdzaXplX2JpdG1hcAk9IFNaXzRLIHwgU1pfNjRLIHwgU1pfMU0g
fCBTWl8xNk0sDQogfTsNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL2lvbW11L210a19pb21tdS5o
IGIvZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuaA0KaW5kZXggZDhhZWYwZDU3YjFhLi4xMDQ3NmIy
M2FkZWUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2lvbW11L210a19pb21tdS5oDQorKysgYi9kcml2
ZXJzL2lvbW11L210a19pb21tdS5oDQpAQCAtMzYsNiArMzYsMTIgQEAgZW51bSBtdGtfaW9tbXVf
cGxhdCB7DQogCU00VV9NVDgxODMsDQogfTsNCiANCitzdHJ1Y3QgbXRrX2lvbW11X3Jlc3ZfaW92
YV9yZWdpb24gew0KKwlkbWFfYWRkcl90CQlpb3ZhX2Jhc2U7DQorCXNpemVfdAkJCWlvdmFfc2l6
ZTsNCisJZW51bSBpb21tdV9yZXN2X3R5cGUJdHlwZTsNCit9Ow0KKw0KIC8qDQogICogcmVzZXJ2
ZWQgSU9WQSBEb21haW4gZm9yIElPTU1VIHVzZXJzIG9mIEhXIGxpbWl0YXRpb24uDQogICovDQpA
QCAtNjgsNiArNzQsMTIgQEAgc3RydWN0IG10a19pb21tdV9wbGF0X2RhdGEgew0KIAl1MzIJCSAg
ICBkb21fY250Ow0KIAl1bnNpZ25lZCBjaGFyICAgICAgIGxhcmJpZF9yZW1hcFsyXVtNVEtfTEFS
Ql9OUl9NQVhdOw0KIAljb25zdCBzdHJ1Y3QgbXRrX2RvbWFpbl9kYXRhCSpkb21fZGF0YTsNCisJ
LyoNCisJICogcmVzZXJ2ZS9kaXItbWFwcGluZyBpb3ZhIHJlZ2lvbiBkYXRhDQorCSAqIHRvZG86
IGZvciBkaWZmZXJlbnQgcmVzZXJ2ZSBuZWVkcyBvbiBtdWx0aXBsZSBpb21tdSBkb21haW5zDQor
CSAqLw0KKwljb25zdCB1bnNpZ25lZCBpbnQgIHJlc3ZfY250Ow0KKwljb25zdCBzdHJ1Y3QgbXRr
X2lvbW11X3Jlc3ZfaW92YV9yZWdpb24gKnJlc3ZfcmVnaW9uOw0KIH07DQogDQogc3RydWN0IG10
a19pb21tdV9kb21haW47DQotLSANCjIuMTguMA0KDQo8L3ByZT48IS0tdHlwZTp0ZXh0LS0+PCEt
LXstLT48cHJlPioqKioqKioqKioqKiogTUVESUFURUsgQ29uZmlkZW50aWFsaXR5IE5vdGljZQ0K
ICoqKioqKioqKioqKioqKioqKioqDQpUaGUgaW5mb3JtYXRpb24gY29udGFpbmVkIGluIHRoaXMg
ZS1tYWlsIG1lc3NhZ2UgKGluY2x1ZGluZyBhbnkgDQphdHRhY2htZW50cykgbWF5IGJlIGNvbmZp
ZGVudGlhbCwgcHJvcHJpZXRhcnksIHByaXZpbGVnZWQsIG9yIG90aGVyd2lzZQ0KZXhlbXB0IGZy
b20gZGlzY2xvc3VyZSB1bmRlciBhcHBsaWNhYmxlIGxhd3MuIEl0IGlzIGludGVuZGVkIHRvIGJl
IA0KY29udmV5ZWQgb25seSB0byB0aGUgZGVzaWduYXRlZCByZWNpcGllbnQocykuIEFueSB1c2Us
IGRpc3NlbWluYXRpb24sIA0KZGlzdHJpYnV0aW9uLCBwcmludGluZywgcmV0YWluaW5nIG9yIGNv
cHlpbmcgb2YgdGhpcyBlLW1haWwgKGluY2x1ZGluZyBpdHMgDQphdHRhY2htZW50cykgYnkgdW5p
bnRlbmRlZCByZWNpcGllbnQocykgaXMgc3RyaWN0bHkgcHJvaGliaXRlZCBhbmQgbWF5IA0KYmUg
dW5sYXdmdWwuIElmIHlvdSBhcmUgbm90IGFuIGludGVuZGVkIHJlY2lwaWVudCBvZiB0aGlzIGUt
bWFpbCwgb3IgYmVsaWV2ZQ0KIA0KdGhhdCB5b3UgaGF2ZSByZWNlaXZlZCB0aGlzIGUtbWFpbCBp
biBlcnJvciwgcGxlYXNlIG5vdGlmeSB0aGUgc2VuZGVyIA0KaW1tZWRpYXRlbHkgKGJ5IHJlcGx5
aW5nIHRvIHRoaXMgZS1tYWlsKSwgZGVsZXRlIGFueSBhbmQgYWxsIGNvcGllcyBvZiANCnRoaXMg
ZS1tYWlsIChpbmNsdWRpbmcgYW55IGF0dGFjaG1lbnRzKSBmcm9tIHlvdXIgc3lzdGVtLCBhbmQg
ZG8gbm90DQpkaXNjbG9zZSB0aGUgY29udGVudCBvZiB0aGlzIGUtbWFpbCB0byBhbnkgb3RoZXIg
cGVyc29uLiBUaGFuayB5b3UhDQo8L3ByZT48IS0tfS0tPg==

--__=_Part_Boundary_009_60630689.1844628106
Content-Type: text/plain
Content-Transfer-Encoding: base64

Rm9yIG11bHRpcGxlIGlvbW11X2RvbWFpbnMsIHdlIG5lZWQgdG8gcmVzZXJ2ZSBzb21lIGlvdmEN
CnJlZ2lvbnMsIHNvIHdlIHdpbGwgYWRkIG10a19pb21tdV9yZXN2X2lvdmFfcmVnaW9uIHN0cnVj
dHVyZS4NCkl0IGluY2x1ZGVzIHRoZSBzdGFydCBhZGRyZXNzIGFuZCBzaXplIG9mIGlvdmEgYW5k
IGlvbW11X3Jlc3ZfdHlwZS4NCkJhc2VkIG9uIHRoZSBmdW5jdGlvbiwgd2Ugd2lsbCByZWFsaXpl
IG11bHRpcGxlIG10a19pb21tdV9kb21haW5zDQoNClNpZ25lZC1vZmYtYnk6IEFuYW4gU3VuIDxh
bmFuLnN1bkBtZWRpYXRlay5jb20+DQpTaWduZWQtb2ZmLWJ5OiBDaGFvIEhhbyA8Y2hhby5oYW9A
bWVkaWF0ZWsuY29tPg0KLS0tDQogZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuYyB8IDQ3ICsrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIGRyaXZlcnMvaW9tbXUvbXRrX2lv
bW11LmggfCAxMiArKysrKysrKysrDQogMiBmaWxlcyBjaGFuZ2VkLCA1OSBpbnNlcnRpb25zKCsp
DQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2lvbW11L210a19pb21tdS5jIGIvZHJpdmVycy9pb21t
dS9tdGtfaW9tbXUuYw0KaW5kZXggOGMwNmQyYTc5M2E3Li5jMGNkN2RhNzFjMmMgMTAwNjQ0DQot
LS0gYS9kcml2ZXJzL2lvbW11L210a19pb21tdS5jDQorKysgYi9kcml2ZXJzL2lvbW11L210a19p
b21tdS5jDQpAQCAtNjk3LDYgKzY5Nyw1MSBAQCBzdGF0aWMgaW50IG10a19pb21tdV9vZl94bGF0
ZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBvZl9waGFuZGxlX2FyZ3MgKmFyZ3MpDQogCXJl
dHVybiBpb21tdV9md3NwZWNfYWRkX2lkcyhkZXYsIGFyZ3MtPmFyZ3MsIDEpOw0KIH0NCiANCisv
KiByZXNlcnZlL2Rpci1tYXAgaW92YSByZWdpb24gKi8NCitzdGF0aWMgdm9pZCBtdGtfaW9tbXVf
Z2V0X3Jlc3ZfcmVnaW9ucyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQorCQkJCSAgICAgICBzdHJ1Y3Qg
bGlzdF9oZWFkICpoZWFkKQ0KK3sNCisJc3RydWN0IG10a19pb21tdV9kYXRhICpkYXRhID0gZGV2
X2lvbW11X2Z3c3BlY19nZXQoZGV2KS0+aW9tbXVfcHJpdjsNCisJdW5zaWduZWQgaW50IGksIHRv
dGFsX2NudCA9IGRhdGEtPnBsYXRfZGF0YS0+cmVzdl9jbnQ7DQorCWNvbnN0IHN0cnVjdCBtdGtf
aW9tbXVfcmVzdl9pb3ZhX3JlZ2lvbiAqcmVzdl9kYXRhOw0KKwlzdHJ1Y3QgaW9tbXVfcmVzdl9y
ZWdpb24gKnJlZ2lvbjsNCisJdW5zaWduZWQgbG9uZyBiYXNlID0gMDsNCisJc2l6ZV90IHNpemUg
PSAwOw0KKwlpbnQgcHJvdCA9IElPTU1VX1dSSVRFIHwgSU9NTVVfUkVBRDsNCisNCisJcmVzdl9k
YXRhID0gZGF0YS0+cGxhdF9kYXRhLT5yZXN2X3JlZ2lvbjsNCisNCisJZm9yIChpID0gMDsgaSA8
IHRvdGFsX2NudDsgaSsrKSB7DQorCQlzaXplID0gMDsNCisJCWlmIChyZXN2X2RhdGFbaV0uaW92
YV9zaXplKSB7DQorCQkJYmFzZSA9ICh1bnNpZ25lZCBsb25nKXJlc3ZfZGF0YVtpXS5pb3ZhX2Jh
c2U7DQorCQkJc2l6ZSA9IHJlc3ZfZGF0YVtpXS5pb3ZhX3NpemU7DQorCQl9DQorCQlpZiAoIXNp
emUpDQorCQkJY29udGludWU7DQorDQorCQlyZWdpb24gPSBpb21tdV9hbGxvY19yZXN2X3JlZ2lv
bihiYXNlLCBzaXplLCBwcm90LA0KKwkJCQkJCSByZXN2X2RhdGFbaV0udHlwZSk7DQorCQlpZiAo
IXJlZ2lvbikNCisJCQlyZXR1cm47DQorDQorCQlsaXN0X2FkZF90YWlsKCZyZWdpb24tPmxpc3Qs
IGhlYWQpOw0KKw0KKwkJZGV2X2RiZyhkYXRhLT5kZXYsICIlcyBpb3ZhIDB4JXggfiAweCV4XG4i
LA0KKwkJCShyZXN2X2RhdGFbaV0udHlwZSA9PSBJT01NVV9SRVNWX0RJUkVDVCkgPyAiZG0iIDog
InJzdiIsDQorCQkJKHVuc2lnbmVkIGludCliYXNlLCAodW5zaWduZWQgaW50KShiYXNlICsgc2l6
ZSAtIDEpKTsNCisJfQ0KK30NCisNCitzdGF0aWMgdm9pZCBtdGtfaW9tbXVfcHV0X3Jlc3ZfcmVn
aW9ucyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQorCQkJCSAgICAgICBzdHJ1Y3QgbGlzdF9oZWFkICpo
ZWFkKQ0KK3sNCisJc3RydWN0IGlvbW11X3Jlc3ZfcmVnaW9uICplbnRyeSwgKm5leHQ7DQorDQor
CWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShlbnRyeSwgbmV4dCwgaGVhZCwgbGlzdCkNCisJCWtm
cmVlKGVudHJ5KTsNCit9DQorDQogc3RhdGljIGNvbnN0IHN0cnVjdCBpb21tdV9vcHMgbXRrX2lv
bW11X29wcyA9IHsNCiAJLmRvbWFpbl9hbGxvYwk9IG10a19pb21tdV9kb21haW5fYWxsb2MsDQog
CS5kb21haW5fZnJlZQk9IG10a19pb21tdV9kb21haW5fZnJlZSwNCkBAIC03MTEsNiArNzU2LDgg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBpb21tdV9vcHMgbXRrX2lvbW11X29wcyA9IHsNCiAJLnJl
bW92ZV9kZXZpY2UJPSBtdGtfaW9tbXVfcmVtb3ZlX2RldmljZSwNCiAJLmRldmljZV9ncm91cAk9
IG10a19pb21tdV9kZXZpY2VfZ3JvdXAsDQogCS5vZl94bGF0ZQk9IG10a19pb21tdV9vZl94bGF0
ZSwNCisJLmdldF9yZXN2X3JlZ2lvbnMgPSBtdGtfaW9tbXVfZ2V0X3Jlc3ZfcmVnaW9ucywNCisJ
LnB1dF9yZXN2X3JlZ2lvbnMgPSBtdGtfaW9tbXVfcHV0X3Jlc3ZfcmVnaW9ucywNCiAJLnBnc2l6
ZV9iaXRtYXAJPSBTWl80SyB8IFNaXzY0SyB8IFNaXzFNIHwgU1pfMTZNLA0KIH07DQogDQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuaCBiL2RyaXZlcnMvaW9tbXUvbXRrX2lv
bW11LmgNCmluZGV4IGQ4YWVmMGQ1N2IxYS4uMTA0NzZiMjNhZGVlIDEwMDY0NA0KLS0tIGEvZHJp
dmVycy9pb21tdS9tdGtfaW9tbXUuaA0KKysrIGIvZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuaA0K
QEAgLTM2LDYgKzM2LDEyIEBAIGVudW0gbXRrX2lvbW11X3BsYXQgew0KIAlNNFVfTVQ4MTgzLA0K
IH07DQogDQorc3RydWN0IG10a19pb21tdV9yZXN2X2lvdmFfcmVnaW9uIHsNCisJZG1hX2FkZHJf
dAkJaW92YV9iYXNlOw0KKwlzaXplX3QJCQlpb3ZhX3NpemU7DQorCWVudW0gaW9tbXVfcmVzdl90
eXBlCXR5cGU7DQorfTsNCisNCiAvKg0KICAqIHJlc2VydmVkIElPVkEgRG9tYWluIGZvciBJT01N
VSB1c2VycyBvZiBIVyBsaW1pdGF0aW9uLg0KICAqLw0KQEAgLTY4LDYgKzc0LDEyIEBAIHN0cnVj
dCBtdGtfaW9tbXVfcGxhdF9kYXRhIHsNCiAJdTMyCQkgICAgZG9tX2NudDsNCiAJdW5zaWduZWQg
Y2hhciAgICAgICBsYXJiaWRfcmVtYXBbMl1bTVRLX0xBUkJfTlJfTUFYXTsNCiAJY29uc3Qgc3Ry
dWN0IG10a19kb21haW5fZGF0YQkqZG9tX2RhdGE7DQorCS8qDQorCSAqIHJlc2VydmUvZGlyLW1h
cHBpbmcgaW92YSByZWdpb24gZGF0YQ0KKwkgKiB0b2RvOiBmb3IgZGlmZmVyZW50IHJlc2VydmUg
bmVlZHMgb24gbXVsdGlwbGUgaW9tbXUgZG9tYWlucw0KKwkgKi8NCisJY29uc3QgdW5zaWduZWQg
aW50ICByZXN2X2NudDsNCisJY29uc3Qgc3RydWN0IG10a19pb21tdV9yZXN2X2lvdmFfcmVnaW9u
ICpyZXN2X3JlZ2lvbjsNCiB9Ow0KIA0KIHN0cnVjdCBtdGtfaW9tbXVfZG9tYWluOw0KLS0gDQoy
LjE4LjANCg==

--__=_Part_Boundary_009_60630689.1844628106--


--===============3934343908229643289==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
iommu mailing list
iommu@lists.linux-foundation.org
https://lists.linuxfoundation.org/mailman/listinfo/iommu
--===============3934343908229643289==--

