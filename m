Return-Path: <iommu-bounces@lists.linux-foundation.org>
X-Original-To: lists.iommu@lfdr.de
Delivered-To: lists.iommu@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id A51D3E7045
	for <lists.iommu@lfdr.de>; Mon, 28 Oct 2019 12:21:27 +0100 (CET)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id B2C591115;
	Mon, 28 Oct 2019 11:21:02 +0000 (UTC)
X-Original-To: iommu@lists.linux-foundation.org
Delivered-To: iommu@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id CCCFAB5F
	for <iommu@lists.linux-foundation.org>;
	Mon, 28 Oct 2019 08:28:45 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mailgw02.mediatek.com (unknown [210.61.82.184])
	by smtp1.linuxfoundation.org (Postfix) with ESMTP id D0055875
	for <iommu@lists.linux-foundation.org>;
	Mon, 28 Oct 2019 08:28:44 +0000 (UTC)
X-UUID: a2f1e12e90a94c179a0d6ba42419d94d-20191028
X-UUID: a2f1e12e90a94c179a0d6ba42419d94d-20191028
Received: from mtkmrs01.mediatek.inc [(172.21.131.159)] by
	mailgw02.mediatek.com (envelope-from <chao.hao@mediatek.com>)
	(Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
	with ESMTP id 1530107681; Mon, 28 Oct 2019 16:28:40 +0800
Received: from mtkcas08.mediatek.inc (172.21.101.126) by
	mtkmbs07n2.mediatek.inc (172.21.101.141) with Microsoft SMTP Server
	(TLS) id 15.0.1395.4; Mon, 28 Oct 2019 16:28:37 +0800
Received: from localhost.localdomain (10.15.20.246) by mtkcas08.mediatek.inc
	(172.21.101.73) with Microsoft SMTP Server id 15.0.1395.4 via Frontend
	Transport; Mon, 28 Oct 2019 16:28:36 +0800
From: Chao Hao <chao.hao@mediatek.com>
To: Joerg Roedel <joro@8bytes.org>, Rob Herring <robh+dt@kernel.org>, Matthias
	Brugger <matthias.bgg@gmail.com>
Subject: [PATCH 04/13] iommu/mediatek: Remove mtk_iommu_domain_finalise
Date: Mon, 28 Oct 2019 16:28:11 +0800
Message-ID: <20191028082820.20221-5-chao.hao@mediatek.com>
X-Mailer: git-send-email 2.18.0
In-Reply-To: <20191028082820.20221-1-chao.hao@mediatek.com>
References: <20191028082820.20221-1-chao.hao@mediatek.com>
MIME-Version: 1.0
X-Spam-Status: No, score=-0.2 required=5.0 tests=BAYES_00,HTML_MESSAGE,
	MAY_BE_FORGED, MIME_BASE64_TEXT,
	UNPARSEABLE_RELAY autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
X-Mailman-Approved-At: Mon, 28 Oct 2019 11:21:00 +0000
Cc: Anan Sun <anan.sun@mediatek.com>, devicetree@vger.kernel.org,
	Cui Zhang <cui.zhang@mediatek.com>,
	Jun Yan <jun.yan@mediatek.com>, wsd_upstream@mediatek.com,
	linux-kernel@vger.kernel.org, Chao Hao <chao.hao@mediatek.com>,
	iommu@lists.linux-foundation.org, linux-mediatek@lists.infradead.org,
	Miles Chen <miles.chen@mediatek.com>, linux-arm-kernel@lists.infradead.org,
	Guangming Cao <guangming.cao@mediatek.com>
X-BeenThere: iommu@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Development issues for Linux IOMMU support
	<iommu.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/iommu>,
	<mailto:iommu-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/iommu/>
List-Post: <mailto:iommu@lists.linux-foundation.org>
List-Help: <mailto:iommu-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/iommu>,
	<mailto:iommu-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============6080047436231100171=="
Sender: iommu-bounces@lists.linux-foundation.org
Errors-To: iommu-bounces@lists.linux-foundation.org

--===============6080047436231100171==
Content-Type: multipart/alternative;
	boundary="__=_Part_Boundary_005_1101284536.1384632072"

--__=_Part_Boundary_005_1101284536.1384632072
Content-Type: text/html
Content-Transfer-Encoding: base64

PHByZT4NCldlIGFscmVhZHkgaGF2ZSBnbG9iYWwgbXRrX2lvbW11X3BndGFibGUgc3RydWN0dXJl
IHRvIGRlc2NyaWJlDQpwYWdlIHRhYmxlIGFuZCBjcmVhdGUgaXQgaW4gZ3JvdXBfZGV2aWNlLCAm
cXVvdDttdGtfaW9tbXVfZG9tYWluX2ZpbmFsaXNlJnF1b3Q7DQppcyBhcyB0aGUgc2FtZSBhcyB0
aGF0LCBzbyBzbyB3ZSB3aWxsIHJlbW92ZSBtdGtfaW9tbXVfZG9tYWluX2ZpbmFsaXNlLg0KDQpT
aWduZWQtb2ZmLWJ5OiBDaGFvIEhhbyAmbHQ7Y2hhby5oYW9AbWVkaWF0ZWsuY29tJmd0Ow0KLS0t
DQogZHJpdmVycy9pb21tdS9tdGtfaW9tbXUuYyB8IDQ4ICsrKysrKysrLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KIDEgZmlsZSBjaGFuZ2VkLCAxMCBpbnNlcnRpb25zKCspLCAzOCBk
ZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW9tbXUvbXRrX2lvbW11LmMgYi9k
cml2ZXJzL2lvbW11L210a19pb21tdS5jDQppbmRleCBmY2JkZTZiMGY1OGQuLjNmYTA5YjEyZTlm
OSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvaW9tbXUvbXRrX2lvbW11LmMNCisrKyBiL2RyaXZlcnMv
aW9tbXUvbXRrX2lvbW11LmMNCkBAIC0zMjksNDAgKzMyOSw2IEBAIHN0YXRpYyB2b2lkIG10a19p
b21tdV9jb25maWcoc3RydWN0IG10a19pb21tdV9kYXRhICpkYXRhLA0KIAl9DQogfQ0KIA0KLXN0
YXRpYyBpbnQgbXRrX2lvbW11X2RvbWFpbl9maW5hbGlzZShzdHJ1Y3QgbXRrX2lvbW11X2RvbWFp
biAqZG9tKQ0KLXsNCi0Jc3RydWN0IG10a19pb21tdV9kYXRhICpkYXRhID0gbXRrX2lvbW11X2dl
dF9tNHVfZGF0YSgpOw0KLQ0KLQlpZiAoZGF0YS0mZ3Q7cGd0YWJsZSkgew0KLQkJZG9tLSZndDtj
ZmcgPSBkYXRhLSZndDtwZ3RhYmxlLSZndDtjZmc7DQotCQlkb20tJmd0O2lvcCA9IGRhdGEtJmd0
O3BndGFibGUtJmd0O2lvcDsNCi0JCWRvbS0mZ3Q7ZG9tYWluLnBnc2l6ZV9iaXRtYXAgPSBkYXRh
LSZndDtwZ3RhYmxlLSZndDtjZmcucGdzaXplX2JpdG1hcDsNCi0JCXJldHVybiAwOw0KLQl9DQot
DQotCWRvbS0mZ3Q7Y2ZnID0gKHN0cnVjdCBpb19wZ3RhYmxlX2NmZykgew0KLQkJLnF1aXJrcyA9
IElPX1BHVEFCTEVfUVVJUktfQVJNX05TIHwNCi0JCQlJT19QR1RBQkxFX1FVSVJLX05PX1BFUk1T
IHwNCi0JCQlJT19QR1RBQkxFX1FVSVJLX1RMQklfT05fTUFQIHwNCi0JCQlJT19QR1RBQkxFX1FV
SVJLX0FSTV9NVEtfRVhULA0KLQkJLnBnc2l6ZV9iaXRtYXAgPSBtdGtfaW9tbXVfb3BzLnBnc2l6
ZV9iaXRtYXAsDQotCQkuaWFzID0gMzIsDQotCQkub2FzID0gMzQsDQotCQkudGxiID0gJmFtcDtt
dGtfaW9tbXVfZmx1c2hfb3BzLA0KLQkJLmlvbW11X2RldiA9IGRhdGEtJmd0O2RldiwNCi0JfTsN
Ci0NCi0JZG9tLSZndDtpb3AgPSBhbGxvY19pb19wZ3RhYmxlX29wcyhBUk1fVjdTLCAmYW1wO2Rv
bS0mZ3Q7Y2ZnLCBkYXRhKTsNCi0JaWYgKCFkb20tJmd0O2lvcCkgew0KLQkJZGV2X2VycihkYXRh
LSZndDtkZXYsICZxdW90O0ZhaWxlZCB0byBhbGxvYyBpbyBwZ3RhYmxlXG4mcXVvdDspOw0KLQkJ
cmV0dXJuIC1FSU5WQUw7DQotCX0NCi0NCi0JLyogVXBkYXRlIG91ciBzdXBwb3J0IHBhZ2Ugc2l6
ZXMgYml0bWFwICovDQotCWRvbS0mZ3Q7ZG9tYWluLnBnc2l6ZV9iaXRtYXAgPSBkb20tJmd0O2Nm
Zy5wZ3NpemVfYml0bWFwOw0KLQlyZXR1cm4gMDsNCi19DQotDQogc3RhdGljIHN0cnVjdCBtdGtf
aW9tbXVfcGd0YWJsZSAqY3JlYXRlX3BndGFibGUoc3RydWN0IG10a19pb21tdV9kYXRhICpkYXRh
KQ0KIHsNCiAJc3RydWN0IG10a19pb21tdV9wZ3RhYmxlICpwZ3RhYmxlOw0KQEAgLTQyMCwxMSAr
Mzg2LDE3IEBAIHN0YXRpYyBpbnQgbXRrX2lvbW11X2F0dGFjaF9wZ3RhYmxlKHN0cnVjdCBtdGtf
aW9tbXVfZGF0YSAqZGF0YSwNCiANCiBzdGF0aWMgc3RydWN0IGlvbW11X2RvbWFpbiAqbXRrX2lv
bW11X2RvbWFpbl9hbGxvYyh1bnNpZ25lZCB0eXBlKQ0KIHsNCisJc3RydWN0IG10a19pb21tdV9w
Z3RhYmxlICpwZ3RhYmxlID0gbXRrX2lvbW11X2dldF9wZ3RhYmxlKCk7DQogCXN0cnVjdCBtdGtf
aW9tbXVfZG9tYWluICpkb207DQogDQogCWlmICh0eXBlICE9IElPTU1VX0RPTUFJTl9ETUEpDQog
CQlyZXR1cm4gTlVMTDsNCiANCisJaWYgKCFwZ3RhYmxlKSB7DQorCQlwcl9lcnIoJnF1b3Q7JXMs
IHBndGFibGUgaXMgbm90IHJlYWR5XG4mcXVvdDssIF9fZnVuY19fKTsNCisJCXJldHVybiBOVUxM
Ow0KKwl9DQorDQogCWRvbSA9IGt6YWxsb2Moc2l6ZW9mKCpkb20pLCBHRlBfS0VSTkVMKTsNCiAJ
aWYgKCFkb20pDQogCQlyZXR1cm4gTlVMTDsNCkBAIC00MzIsOCArNDA0LDEwIEBAIHN0YXRpYyBz
dHJ1Y3QgaW9tbXVfZG9tYWluICptdGtfaW9tbXVfZG9tYWluX2FsbG9jKHVuc2lnbmVkIHR5cGUp
DQogCWlmIChpb21tdV9nZXRfZG1hX2Nvb2tpZSgmYW1wO2RvbS0mZ3Q7ZG9tYWluKSkNCiAJCWdv
dG8gIGZyZWVfZG9tOw0KIA0KLQlpZiAobXRrX2lvbW11X2RvbWFpbl9maW5hbGlzZShkb20pKQ0K
LQkJZ290byAgcHV0X2RtYV9jb29raWU7DQorCWRvbS0mZ3Q7Y2ZnID0gcGd0YWJsZS0mZ3Q7Y2Zn
Ow0KKwlkb20tJmd0O2lvcCA9IHBndGFibGUtJmd0O2lvcDsNCisJLyogVXBkYXRlIG91ciBzdXBw
b3J0IHBhZ2Ugc2l6ZXMgYml0bWFwICovDQorCWRvbS0mZ3Q7ZG9tYWluLnBnc2l6ZV9iaXRtYXAg
PSBwZ3RhYmxlLSZndDtjZmcucGdzaXplX2JpdG1hcDsNCiANCiAJZG9tLSZndDtkb21haW4uZ2Vv
bWV0cnkuYXBlcnR1cmVfc3RhcnQgPSAwOw0KIAlkb20tJmd0O2RvbWFpbi5nZW9tZXRyeS5hcGVy
dHVyZV9lbmQgPSBETUFfQklUX01BU0soMzIpOw0KQEAgLTQ0MSw4ICs0MTUsNiBAQCBzdGF0aWMg
c3RydWN0IGlvbW11X2RvbWFpbiAqbXRrX2lvbW11X2RvbWFpbl9hbGxvYyh1bnNpZ25lZCB0eXBl
KQ0KIA0KIAlyZXR1cm4gJmFtcDtkb20tJmd0O2RvbWFpbjsNCiANCi1wdXRfZG1hX2Nvb2tpZToN
Ci0JaW9tbXVfcHV0X2RtYV9jb29raWUoJmFtcDtkb20tJmd0O2RvbWFpbik7DQogZnJlZV9kb206
DQogCWtmcmVlKGRvbSk7DQogCXJldHVybiBOVUxMOw0KLS0gDQoyLjE4LjANCg0KPC9wcmU+PCEt
LXR5cGU6dGV4dC0tPjwhLS17LS0+PHByZT4qKioqKioqKioqKioqIE1FRElBVEVLIENvbmZpZGVu
dGlhbGl0eSBOb3RpY2UNCiAqKioqKioqKioqKioqKioqKioqKg0KVGhlIGluZm9ybWF0aW9uIGNv
bnRhaW5lZCBpbiB0aGlzIGUtbWFpbCBtZXNzYWdlIChpbmNsdWRpbmcgYW55IA0KYXR0YWNobWVu
dHMpIG1heSBiZSBjb25maWRlbnRpYWwsIHByb3ByaWV0YXJ5LCBwcml2aWxlZ2VkLCBvciBvdGhl
cndpc2UNCmV4ZW1wdCBmcm9tIGRpc2Nsb3N1cmUgdW5kZXIgYXBwbGljYWJsZSBsYXdzLiBJdCBp
cyBpbnRlbmRlZCB0byBiZSANCmNvbnZleWVkIG9ubHkgdG8gdGhlIGRlc2lnbmF0ZWQgcmVjaXBp
ZW50KHMpLiBBbnkgdXNlLCBkaXNzZW1pbmF0aW9uLCANCmRpc3RyaWJ1dGlvbiwgcHJpbnRpbmcs
IHJldGFpbmluZyBvciBjb3B5aW5nIG9mIHRoaXMgZS1tYWlsIChpbmNsdWRpbmcgaXRzIA0KYXR0
YWNobWVudHMpIGJ5IHVuaW50ZW5kZWQgcmVjaXBpZW50KHMpIGlzIHN0cmljdGx5IHByb2hpYml0
ZWQgYW5kIG1heSANCmJlIHVubGF3ZnVsLiBJZiB5b3UgYXJlIG5vdCBhbiBpbnRlbmRlZCByZWNp
cGllbnQgb2YgdGhpcyBlLW1haWwsIG9yIGJlbGlldmUNCiANCnRoYXQgeW91IGhhdmUgcmVjZWl2
ZWQgdGhpcyBlLW1haWwgaW4gZXJyb3IsIHBsZWFzZSBub3RpZnkgdGhlIHNlbmRlciANCmltbWVk
aWF0ZWx5IChieSByZXBseWluZyB0byB0aGlzIGUtbWFpbCksIGRlbGV0ZSBhbnkgYW5kIGFsbCBj
b3BpZXMgb2YgDQp0aGlzIGUtbWFpbCAoaW5jbHVkaW5nIGFueSBhdHRhY2htZW50cykgZnJvbSB5
b3VyIHN5c3RlbSwgYW5kIGRvIG5vdA0KZGlzY2xvc2UgdGhlIGNvbnRlbnQgb2YgdGhpcyBlLW1h
aWwgdG8gYW55IG90aGVyIHBlcnNvbi4gVGhhbmsgeW91IQ0KPC9wcmU+PCEtLX0tLT4=

--__=_Part_Boundary_005_1101284536.1384632072
Content-Type: text/plain
Content-Transfer-Encoding: base64

V2UgYWxyZWFkeSBoYXZlIGdsb2JhbCBtdGtfaW9tbXVfcGd0YWJsZSBzdHJ1Y3R1cmUgdG8gZGVz
Y3JpYmUNCnBhZ2UgdGFibGUgYW5kIGNyZWF0ZSBpdCBpbiBncm91cF9kZXZpY2UsICJtdGtfaW9t
bXVfZG9tYWluX2ZpbmFsaXNlIg0KaXMgYXMgdGhlIHNhbWUgYXMgdGhhdCwgc28gc28gd2Ugd2ls
bCByZW1vdmUgbXRrX2lvbW11X2RvbWFpbl9maW5hbGlzZS4NCg0KU2lnbmVkLW9mZi1ieTogQ2hh
byBIYW8gPGNoYW8uaGFvQG1lZGlhdGVrLmNvbT4NCi0tLQ0KIGRyaXZlcnMvaW9tbXUvbXRrX2lv
bW11LmMgfCA0OCArKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAxIGZp
bGUgY2hhbmdlZCwgMTAgaW5zZXJ0aW9ucygrKSwgMzggZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2lvbW11L210a19pb21tdS5jIGIvZHJpdmVycy9pb21tdS9tdGtfaW9tbXUu
Yw0KaW5kZXggZmNiZGU2YjBmNThkLi4zZmEwOWIxMmU5ZjkgMTAwNjQ0DQotLS0gYS9kcml2ZXJz
L2lvbW11L210a19pb21tdS5jDQorKysgYi9kcml2ZXJzL2lvbW11L210a19pb21tdS5jDQpAQCAt
MzI5LDQwICszMjksNiBAQCBzdGF0aWMgdm9pZCBtdGtfaW9tbXVfY29uZmlnKHN0cnVjdCBtdGtf
aW9tbXVfZGF0YSAqZGF0YSwNCiAJfQ0KIH0NCiANCi1zdGF0aWMgaW50IG10a19pb21tdV9kb21h
aW5fZmluYWxpc2Uoc3RydWN0IG10a19pb21tdV9kb21haW4gKmRvbSkNCi17DQotCXN0cnVjdCBt
dGtfaW9tbXVfZGF0YSAqZGF0YSA9IG10a19pb21tdV9nZXRfbTR1X2RhdGEoKTsNCi0NCi0JaWYg
KGRhdGEtPnBndGFibGUpIHsNCi0JCWRvbS0+Y2ZnID0gZGF0YS0+cGd0YWJsZS0+Y2ZnOw0KLQkJ
ZG9tLT5pb3AgPSBkYXRhLT5wZ3RhYmxlLT5pb3A7DQotCQlkb20tPmRvbWFpbi5wZ3NpemVfYml0
bWFwID0gZGF0YS0+cGd0YWJsZS0+Y2ZnLnBnc2l6ZV9iaXRtYXA7DQotCQlyZXR1cm4gMDsNCi0J
fQ0KLQ0KLQlkb20tPmNmZyA9IChzdHJ1Y3QgaW9fcGd0YWJsZV9jZmcpIHsNCi0JCS5xdWlya3Mg
PSBJT19QR1RBQkxFX1FVSVJLX0FSTV9OUyB8DQotCQkJSU9fUEdUQUJMRV9RVUlSS19OT19QRVJN
UyB8DQotCQkJSU9fUEdUQUJMRV9RVUlSS19UTEJJX09OX01BUCB8DQotCQkJSU9fUEdUQUJMRV9R
VUlSS19BUk1fTVRLX0VYVCwNCi0JCS5wZ3NpemVfYml0bWFwID0gbXRrX2lvbW11X29wcy5wZ3Np
emVfYml0bWFwLA0KLQkJLmlhcyA9IDMyLA0KLQkJLm9hcyA9IDM0LA0KLQkJLnRsYiA9ICZtdGtf
aW9tbXVfZmx1c2hfb3BzLA0KLQkJLmlvbW11X2RldiA9IGRhdGEtPmRldiwNCi0JfTsNCi0NCi0J
ZG9tLT5pb3AgPSBhbGxvY19pb19wZ3RhYmxlX29wcyhBUk1fVjdTLCAmZG9tLT5jZmcsIGRhdGEp
Ow0KLQlpZiAoIWRvbS0+aW9wKSB7DQotCQlkZXZfZXJyKGRhdGEtPmRldiwgIkZhaWxlZCB0byBh
bGxvYyBpbyBwZ3RhYmxlXG4iKTsNCi0JCXJldHVybiAtRUlOVkFMOw0KLQl9DQotDQotCS8qIFVw
ZGF0ZSBvdXIgc3VwcG9ydCBwYWdlIHNpemVzIGJpdG1hcCAqLw0KLQlkb20tPmRvbWFpbi5wZ3Np
emVfYml0bWFwID0gZG9tLT5jZmcucGdzaXplX2JpdG1hcDsNCi0JcmV0dXJuIDA7DQotfQ0KLQ0K
IHN0YXRpYyBzdHJ1Y3QgbXRrX2lvbW11X3BndGFibGUgKmNyZWF0ZV9wZ3RhYmxlKHN0cnVjdCBt
dGtfaW9tbXVfZGF0YSAqZGF0YSkNCiB7DQogCXN0cnVjdCBtdGtfaW9tbXVfcGd0YWJsZSAqcGd0
YWJsZTsNCkBAIC00MjAsMTEgKzM4NiwxNyBAQCBzdGF0aWMgaW50IG10a19pb21tdV9hdHRhY2hf
cGd0YWJsZShzdHJ1Y3QgbXRrX2lvbW11X2RhdGEgKmRhdGEsDQogDQogc3RhdGljIHN0cnVjdCBp
b21tdV9kb21haW4gKm10a19pb21tdV9kb21haW5fYWxsb2ModW5zaWduZWQgdHlwZSkNCiB7DQor
CXN0cnVjdCBtdGtfaW9tbXVfcGd0YWJsZSAqcGd0YWJsZSA9IG10a19pb21tdV9nZXRfcGd0YWJs
ZSgpOw0KIAlzdHJ1Y3QgbXRrX2lvbW11X2RvbWFpbiAqZG9tOw0KIA0KIAlpZiAodHlwZSAhPSBJ
T01NVV9ET01BSU5fRE1BKQ0KIAkJcmV0dXJuIE5VTEw7DQogDQorCWlmICghcGd0YWJsZSkgew0K
KwkJcHJfZXJyKCIlcywgcGd0YWJsZSBpcyBub3QgcmVhZHlcbiIsIF9fZnVuY19fKTsNCisJCXJl
dHVybiBOVUxMOw0KKwl9DQorDQogCWRvbSA9IGt6YWxsb2Moc2l6ZW9mKCpkb20pLCBHRlBfS0VS
TkVMKTsNCiAJaWYgKCFkb20pDQogCQlyZXR1cm4gTlVMTDsNCkBAIC00MzIsOCArNDA0LDEwIEBA
IHN0YXRpYyBzdHJ1Y3QgaW9tbXVfZG9tYWluICptdGtfaW9tbXVfZG9tYWluX2FsbG9jKHVuc2ln
bmVkIHR5cGUpDQogCWlmIChpb21tdV9nZXRfZG1hX2Nvb2tpZSgmZG9tLT5kb21haW4pKQ0KIAkJ
Z290byAgZnJlZV9kb207DQogDQotCWlmIChtdGtfaW9tbXVfZG9tYWluX2ZpbmFsaXNlKGRvbSkp
DQotCQlnb3RvICBwdXRfZG1hX2Nvb2tpZTsNCisJZG9tLT5jZmcgPSBwZ3RhYmxlLT5jZmc7DQor
CWRvbS0+aW9wID0gcGd0YWJsZS0+aW9wOw0KKwkvKiBVcGRhdGUgb3VyIHN1cHBvcnQgcGFnZSBz
aXplcyBiaXRtYXAgKi8NCisJZG9tLT5kb21haW4ucGdzaXplX2JpdG1hcCA9IHBndGFibGUtPmNm
Zy5wZ3NpemVfYml0bWFwOw0KIA0KIAlkb20tPmRvbWFpbi5nZW9tZXRyeS5hcGVydHVyZV9zdGFy
dCA9IDA7DQogCWRvbS0+ZG9tYWluLmdlb21ldHJ5LmFwZXJ0dXJlX2VuZCA9IERNQV9CSVRfTUFT
SygzMik7DQpAQCAtNDQxLDggKzQxNSw2IEBAIHN0YXRpYyBzdHJ1Y3QgaW9tbXVfZG9tYWluICpt
dGtfaW9tbXVfZG9tYWluX2FsbG9jKHVuc2lnbmVkIHR5cGUpDQogDQogCXJldHVybiAmZG9tLT5k
b21haW47DQogDQotcHV0X2RtYV9jb29raWU6DQotCWlvbW11X3B1dF9kbWFfY29va2llKCZkb20t
PmRvbWFpbik7DQogZnJlZV9kb206DQogCWtmcmVlKGRvbSk7DQogCXJldHVybiBOVUxMOw0KLS0g
DQoyLjE4LjANCg==

--__=_Part_Boundary_005_1101284536.1384632072--


--===============6080047436231100171==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
iommu mailing list
iommu@lists.linux-foundation.org
https://lists.linuxfoundation.org/mailman/listinfo/iommu
--===============6080047436231100171==--

