Return-Path: <iommu-bounces@lists.linux-foundation.org>
X-Original-To: lists.iommu@lfdr.de
Delivered-To: lists.iommu@lfdr.de
Received: from hemlock.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id 347F5225A19
	for <lists.iommu@lfdr.de>; Mon, 20 Jul 2020 10:33:44 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by hemlock.osuosl.org (Postfix) with ESMTP id CD5398824B;
	Mon, 20 Jul 2020 08:33:42 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from hemlock.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9d59Diqh6T5o; Mon, 20 Jul 2020 08:33:41 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by hemlock.osuosl.org (Postfix) with ESMTP id CE7FF88249;
	Mon, 20 Jul 2020 08:33:41 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id B22BAC016F;
	Mon, 20 Jul 2020 08:33:41 +0000 (UTC)
X-Original-To: iommu@lists.linux-foundation.org
Delivered-To: iommu@lists.linuxfoundation.org
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 5190BC016F
 for <iommu@lists.linux-foundation.org>; Mon, 20 Jul 2020 08:33:40 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by fraxinus.osuosl.org (Postfix) with ESMTP id 47B2685C5C
 for <iommu@lists.linux-foundation.org>; Mon, 20 Jul 2020 08:33:40 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id w5ZUaMWeOEaB for <iommu@lists.linux-foundation.org>;
 Mon, 20 Jul 2020 08:33:39 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from us-smtp-delivery-1.mimecast.com (us-smtp-1.mimecast.com
 [205.139.110.61])
 by fraxinus.osuosl.org (Postfix) with ESMTPS id CC0BD85758
 for <iommu@lists.linux-foundation.org>; Mon, 20 Jul 2020 08:33:38 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1595234017;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=jxZwtU6jCdNzDDA32p8x0Lt0O/6ubHPtsEvyLzyrp7M=;
 b=Hwgt3ILEcqS0kAhwlxXL4yod/Eiu3/NZY49/JrQl1pYjxKcW9IE3EpnVZZ8g8KngkAa1/Z
 1mLeHiCQKW0zvPamyNGBJ31nwgzRyzLlBTSQLstJ0IJKZM99MP+jhq+4RktEtDv96XABra
 0HEbo5B66MZ1uuZj0ucNoA+iB/HnsDk=
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-418-dz-TmbyxOae8XgGzqkDTYA-1; Mon, 20 Jul 2020 04:33:28 -0400
X-MC-Unique: dz-TmbyxOae8XgGzqkDTYA-1
Received: from smtp.corp.redhat.com (int-mx06.intmail.prod.int.phx2.redhat.com
 [10.5.11.16])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id DFC0D1080;
 Mon, 20 Jul 2020 08:33:26 +0000 (UTC)
Received: from [10.36.115.54] (ovpn-115-54.ams2.redhat.com [10.36.115.54])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 24B435C240;
 Mon, 20 Jul 2020 08:33:15 +0000 (UTC)
Subject: Re: [PATCH v5 04/15] vfio/type1: Report iommu nesting info to
 userspace
To: "Liu, Yi L" <yi.l.liu@intel.com>,
 "alex.williamson@redhat.com" <alex.williamson@redhat.com>,
 "baolu.lu@linux.intel.com" <baolu.lu@linux.intel.com>,
 "joro@8bytes.org" <joro@8bytes.org>
References: <1594552870-55687-1-git-send-email-yi.l.liu@intel.com>
 <1594552870-55687-5-git-send-email-yi.l.liu@intel.com>
 <2eb692fc-a399-8298-4b4b-68adb0357404@redhat.com>
 <DM5PR11MB1435AF9531C5CF29CD1D1251C37B0@DM5PR11MB1435.namprd11.prod.outlook.com>
From: Auger Eric <eric.auger@redhat.com>
Message-ID: <34931d94-b63b-e366-3c7f-9fd85c8e982d@redhat.com>
Date: Mon, 20 Jul 2020 10:33:14 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <DM5PR11MB1435AF9531C5CF29CD1D1251C37B0@DM5PR11MB1435.namprd11.prod.outlook.com>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.16
Cc: "jean-philippe@linaro.org" <jean-philippe@linaro.org>, "Tian,
 Kevin" <kevin.tian@intel.com>, "Raj, Ashok" <ashok.raj@intel.com>,
 "kvm@vger.kernel.org" <kvm@vger.kernel.org>,
 "stefanha@gmail.com" <stefanha@gmail.com>, "Tian,
 Jun J" <jun.j.tian@intel.com>,
 "iommu@lists.linux-foundation.org" <iommu@lists.linux-foundation.org>,
 "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>, "Sun,
 Yi Y" <yi.y.sun@intel.com>, "Wu, Hao" <hao.wu@intel.com>
X-BeenThere: iommu@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Development issues for Linux IOMMU support
 <iommu.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/iommu>,
 <mailto:iommu-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/iommu/>
List-Post: <mailto:iommu@lists.linux-foundation.org>
List-Help: <mailto:iommu-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/iommu>,
 <mailto:iommu-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: iommu-bounces@lists.linux-foundation.org
Sender: "iommu" <iommu-bounces@lists.linux-foundation.org>

WWksCgpPbiA3LzIwLzIwIDk6NTEgQU0sIExpdSwgWWkgTCB3cm90ZToKPiBIaSBFcmljLAo+IAo+
PiBGcm9tOiBBdWdlciBFcmljIDxlcmljLmF1Z2VyQHJlZGhhdC5jb20+Cj4+IFNlbnQ6IFNhdHVy
ZGF5LCBKdWx5IDE4LCAyMDIwIDE6MzQgQU0KPj4KPj4gWWksCj4+Cj4+IE9uIDcvMTIvMjAgMToy
MCBQTSwgTGl1IFlpIEwgd3JvdGU6Cj4+PiBUaGlzIHBhdGNoIGV4cG9ydHMgaW9tbXUgbmVzdGlu
ZyBjYXBhYmlsaXR5IGluZm8gdG8gdXNlciBzcGFjZSB0aHJvdWdoCj4+PiBWRklPLiBVc2VyIHNw
YWNlIGlzIGV4cGVjdGVkIHRvIGNoZWNrIHRoaXMgaW5mbyBmb3Igc3VwcG9ydGVkIHVBUElzIChl
LmcuCj4+IGl0IGlzIG5vdCBvbmx5IHRvIGNoZWNrIHRoZSBzdXBwb3J0ZWQgdUFQSVMgYnV0IHJh
dGhlciB0byBrbm93IHdoaWNoCj4+IGNhbGxiYWNrcyBpdCBtdXN0IGNhbGwgdXBvbiB2SU9NTVUg
ZXZlbnRzIGFuZCB3aGljaCBmZWF0dXJlcyBhcmUKPj4gc3VwcG9ydGVkIGJ5IHRoZSBwaHlzaWNh
bCBJT01NVS4KPiAKPiB5ZXMsIHdpbGwgcmVmaW5lIHRoZSBkZXNjcmlwdGlvbiBwZXIgeW91ciBj
b21tZW50Lgo+IAo+Pj4gUEFTSUQgYWxsb2MvZnJlZSwgYmluZCBwYWdlIHRhYmxlLCBhbmQgY2Fj
aGUgaW52YWxpZGF0aW9uKSBhbmQgdGhlIHZlbmRvcgo+Pj4gc3BlY2lmaWMgZm9ybWF0IGluZm9y
bWF0aW9uIGZvciBmaXJzdCBsZXZlbC9zdGFnZSBwYWdlIHRhYmxlIHRoYXQgd2lsbCBiZQo+Pj4g
Ym91bmQgdG8uCj4+Pgo+Pj4gVGhlIG5lc3RpbmcgaW5mbyBpcyBhdmFpbGFibGUgb25seSBhZnRl
ciB0aGUgbmVzdGluZyBpb21tdSB0eXBlIGlzIHNldAo+Pj4gZm9yIGEgY29udGFpbmVyLgo+PiB0
byBORVNURUQgdHlwZQo+IAo+IHlvdSBtZWFuICJUaGUgbmVzdGluZyBpbmZvIGlzIGF2YWlsYWJs
ZSBvbmx5IGFmdGVyIGNvbnRhaW5lciBzZXQgdG8gYmUgTkVTVEVEIHR5cGUuIgo+IAo+IHJpZ2h0
Pwpjb3JyZWN0Cj4gCj4+ICBDdXJyZW50IGltcGxlbWVudGF0aW9uIGltcG9zZXMgb25lIGxpbWl0
YXRpb24gLSBvbmUKPj4+IG5lc3RpbmcgY29udGFpbmVyIHNob3VsZCBpbmNsdWRlIGF0IG1vc3Qg
b25lIGdyb3VwLiBUaGUgcGhpbG9zb3BoeSBvZgo+Pj4gdmZpbyBjb250YWluZXIgaXMgaGF2aW5n
IGFsbCBncm91cHMvZGV2aWNlcyB3aXRoaW4gdGhlIGNvbnRhaW5lciBzaGFyZQo+Pj4gdGhlIHNh
bWUgSU9NTVUgY29udGV4dC4gV2hlbiB2U1ZBIGlzIGVuYWJsZWQsIG9uZSBJT01NVSBjb250ZXh0
IGNvdWxkCj4+PiBpbmNsdWRlIG9uZSAybmQtbGV2ZWwgYWRkcmVzcyBzcGFjZSBhbmQgbXVsdGlw
bGUgMXN0LWxldmVsIGFkZHJlc3Mgc3BhY2VzLgo+Pj4gV2hpbGUgdGhlIDJuZC1sZXZlbCBhZGRy
ZXNzIHNwYWNlIGlzIHJlYXNvbmFibHkgc2hhcmFibGUgYnkgbXVsdGlwbGUgZ3JvdXBzCj4+PiAs
IGJsaW5kbHkgc2hhcmluZyAxc3QtbGV2ZWwgYWRkcmVzcyBzcGFjZXMgYWNyb3NzIGFsbCBncm91
cHMgd2l0aGluIHRoZQo+Pj4gY29udGFpbmVyIG1pZ2h0IGluc3RlYWQgYnJlYWsgdGhlIGd1ZXN0
IGV4cGVjdGF0aW9uLiBJbiB0aGUgZnV0dXJlIHN1Yi8KPj4+IHN1cGVyIGNvbnRhaW5lciBjb25j
ZXB0IG1pZ2h0IGJlIGludHJvZHVjZWQgdG8gYWxsb3cgcGFydGlhbCBhZGRyZXNzIHNwYWNlCj4+
PiBzaGFyaW5nIHdpdGhpbiBhbiBJT01NVSBjb250ZXh0LiBCdXQgZm9yIG5vdyBsZXQncyBnbyB3
aXRoIHRoaXMgcmVzdHJpY3Rpb24KPj4+IGJ5IHJlcXVpcmluZyBzaW5nbGV0b24gY29udGFpbmVy
IGZvciB1c2luZyBuZXN0aW5nIGlvbW11IGZlYXR1cmVzLiBCZWxvdwo+Pj4gbGluayBoYXMgdGhl
IHJlbGF0ZWQgZGlzY3Vzc2lvbiBhYm91dCB0aGlzIGRlY2lzaW9uLgo+Pgo+PiBNYXliZSBhZGQg
YSBub3RlIGFib3V0IFNNTVUgcmVsYXRlZCBjaGFuZ2VzIHNwb3R0ZWQgYnkgSmVhbi4KPiAKPiBJ
IGd1ZXNzIHlvdSBtZWFuIHRoZSBjb21tZW50cyBKZWFuIGdhdmUgaW4gcGF0Y2ggMy8xNSwgcmln
aHQ/IEknbGwKPiBjb3B5IGhpcyBjb21tZW50cyBhbmQgYWxzbyBnaXZlIHRoZSBiZWxvdyBsaW5r
IGFzIHdlbGwuCj4gCj4gaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcva3ZtLzIwMjAwNzE3MDkwOTAw
LkdDNDg1MEBteXJpY2EvCmNvcnJlY3QKClRoYW5rcwoKRXJpYwo+IAo+Pj4KPj4+IGh0dHBzOi8v
bGttbC5vcmcvbGttbC8yMDIwLzUvMTUvMTAyOAo+Pj4KPj4+IENjOiBLZXZpbiBUaWFuIDxrZXZp
bi50aWFuQGludGVsLmNvbT4KPj4+IENDOiBKYWNvYiBQYW4gPGphY29iLmp1bi5wYW5AbGludXgu
aW50ZWwuY29tPgo+Pj4gQ2M6IEFsZXggV2lsbGlhbXNvbiA8YWxleC53aWxsaWFtc29uQHJlZGhh
dC5jb20+Cj4+PiBDYzogRXJpYyBBdWdlciA8ZXJpYy5hdWdlckByZWRoYXQuY29tPgo+Pj4gQ2M6
IEplYW4tUGhpbGlwcGUgQnJ1Y2tlciA8amVhbi1waGlsaXBwZUBsaW5hcm8ub3JnPgo+Pj4gQ2M6
IEpvZXJnIFJvZWRlbCA8am9yb0A4Ynl0ZXMub3JnPgo+Pj4gQ2M6IEx1IEJhb2x1IDxiYW9sdS5s
dUBsaW51eC5pbnRlbC5jb20+Cj4+PiBTaWduZWQtb2ZmLWJ5OiBMaXUgWWkgTCA8eWkubC5saXVA
aW50ZWwuY29tPgo+Pj4gLS0tCj4+PiB2NCAtPiB2NToKPj4+ICopIGFkZHJlc3MgY29tbWVudHMg
ZnJvbSBFcmljIEF1Z2VyLgo+Pj4gKikgcmV0dXJuIHN0cnVjdCBpb21tdV9uZXN0aW5nX2luZm8g
Zm9yCj4+IFZGSU9fSU9NTVVfVFlQRTFfSU5GT19DQVBfTkVTVElORyBhcwo+Pj4gICAgY2FwIGlz
IG11Y2ggImNoZWFwIiwgaWYgbmVlZHMgZXh0ZW5zaW9uIGluIGZ1dHVyZSwganVzdCBkZWZpbmUg
YW5vdGhlciBjYXAuCj4+PiAgICBodHRwczovL2xvcmUua2VybmVsLm9yZy9rdm0vMjAyMDA3MDgx
MzI5NDcuNWI3ZWU5NTRAeDEuaG9tZS8KPj4+Cj4+PiB2MyAtPiB2NDoKPj4+ICopIGFkZHJlc3Mg
Y29tbWVudHMgYWdhaW5zdCB2My4KPj4+Cj4+PiB2MSAtPiB2MjoKPj4+ICopIGFkZGVkIGluIHYy
Cj4+PiAtLS0KPj4+ICBkcml2ZXJzL3ZmaW8vdmZpb19pb21tdV90eXBlMS5jIHwgMTAyCj4+ICsr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0KPj4+ICBpbmNsdWRlL3VhcGkv
bGludXgvdmZpby5oICAgICAgIHwgIDE5ICsrKysrKysrCj4+PiAgMiBmaWxlcyBjaGFuZ2VkLCAx
MDkgaW5zZXJ0aW9ucygrKSwgMTIgZGVsZXRpb25zKC0pCj4+Pgo+Pj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvdmZpby92ZmlvX2lvbW11X3R5cGUxLmMgYi9kcml2ZXJzL3ZmaW8vdmZpb19pb21tdV90
eXBlMS5jCj4+PiBpbmRleCAzYmQ3MGZmLi5lZDgwMTA0IDEwMDY0NAo+Pj4gLS0tIGEvZHJpdmVy
cy92ZmlvL3ZmaW9faW9tbXVfdHlwZTEuYwo+Pj4gKysrIGIvZHJpdmVycy92ZmlvL3ZmaW9faW9t
bXVfdHlwZTEuYwo+Pj4gQEAgLTYyLDE4ICs2MiwyMCBAQCBNT0RVTEVfUEFSTV9ERVNDKGRtYV9l
bnRyeV9saW1pdCwKPj4+ICAJCSAiTWF4aW11bSBudW1iZXIgb2YgdXNlciBETUEgbWFwcGluZ3Mg
cGVyIGNvbnRhaW5lciAoNjU1MzUpLiIpOwo+Pj4KPj4+ICBzdHJ1Y3QgdmZpb19pb21tdSB7Cj4+
PiAtCXN0cnVjdCBsaXN0X2hlYWQJZG9tYWluX2xpc3Q7Cj4+PiAtCXN0cnVjdCBsaXN0X2hlYWQJ
aW92YV9saXN0Owo+Pj4gLQlzdHJ1Y3QgdmZpb19kb21haW4JKmV4dGVybmFsX2RvbWFpbjsgLyog
ZG9tYWluIGZvciBleHRlcm5hbCB1c2VyICovCj4+PiAtCXN0cnVjdCBtdXRleAkJbG9jazsKPj4+
IC0Jc3RydWN0IHJiX3Jvb3QJCWRtYV9saXN0Owo+Pj4gLQlzdHJ1Y3QgYmxvY2tpbmdfbm90aWZp
ZXJfaGVhZCBub3RpZmllcjsKPj4+IC0JdW5zaWduZWQgaW50CQlkbWFfYXZhaWw7Cj4+PiAtCXVp
bnQ2NF90CQlwZ3NpemVfYml0bWFwOwo+Pj4gLQlib29sCQkJdjI7Cj4+PiAtCWJvb2wJCQluZXN0
aW5nOwo+Pj4gLQlib29sCQkJZGlydHlfcGFnZV90cmFja2luZzsKPj4+IC0JYm9vbAkJCXBpbm5l
ZF9wYWdlX2RpcnR5X3Njb3BlOwo+Pj4gKwlzdHJ1Y3QgbGlzdF9oZWFkCQlkb21haW5fbGlzdDsK
Pj4+ICsJc3RydWN0IGxpc3RfaGVhZAkJaW92YV9saXN0Owo+Pj4gKwkvKiBkb21haW4gZm9yIGV4
dGVybmFsIHVzZXIgKi8KPj4+ICsJc3RydWN0IHZmaW9fZG9tYWluCQkqZXh0ZXJuYWxfZG9tYWlu
Owo+Pj4gKwlzdHJ1Y3QgbXV0ZXgJCQlsb2NrOwo+Pj4gKwlzdHJ1Y3QgcmJfcm9vdAkJCWRtYV9s
aXN0Owo+Pj4gKwlzdHJ1Y3QgYmxvY2tpbmdfbm90aWZpZXJfaGVhZAlub3RpZmllcjsKPj4+ICsJ
dW5zaWduZWQgaW50CQkJZG1hX2F2YWlsOwo+Pj4gKwl1aW50NjRfdAkJCXBnc2l6ZV9iaXRtYXA7
Cj4+PiArCWJvb2wJCQkJdjI7Cj4+PiArCWJvb2wJCQkJbmVzdGluZzsKPj4+ICsJYm9vbAkJCQlk
aXJ0eV9wYWdlX3RyYWNraW5nOwo+Pj4gKwlib29sCQkJCXBpbm5lZF9wYWdlX2RpcnR5X3Njb3Bl
Owo+Pj4gKwlzdHJ1Y3QgaW9tbXVfbmVzdGluZ19pbmZvCSpuZXN0aW5nX2luZm87Cj4+PiAgfTsK
Pj4+Cj4+PiAgc3RydWN0IHZmaW9fZG9tYWluIHsKPj4+IEBAIC0xMzAsNiArMTMyLDkgQEAgc3Ry
dWN0IHZmaW9fcmVnaW9ucyB7Cj4+PiAgI2RlZmluZSBJU19JT01NVV9DQVBfRE9NQUlOX0lOX0NP
TlRBSU5FUihpb21tdSkJXAo+Pj4gIAkJCQkJKCFsaXN0X2VtcHR5KCZpb21tdS0+ZG9tYWluX2xp
c3QpKQo+Pj4KPj4+ICsjZGVmaW5lIENPTlRBSU5FUl9IQVNfRE9NQUlOKGlvbW11KQkoKChpb21t
dSktPmV4dGVybmFsX2RvbWFpbikgfHwgXAo+Pj4gKwkJCQkJICghbGlzdF9lbXB0eSgmKGlvbW11
KS0+ZG9tYWluX2xpc3QpKSkKPj4+ICsKPj4+ICAjZGVmaW5lIERJUlRZX0JJVE1BUF9CWVRFUyhu
KQkoQUxJR04obiwgQklUU19QRVJfVFlQRSh1NjQpKSAvCj4+IEJJVFNfUEVSX0JZVEUpCj4+Pgo+
Pj4gIC8qCj4+PiBAQCAtMTkyOSw2ICsxOTM0LDEzIEBAIHN0YXRpYyB2b2lkIHZmaW9faW9tbXVf
aW92YV9pbnNlcnRfY29weShzdHJ1Y3QKPj4gdmZpb19pb21tdSAqaW9tbXUsCj4+Pgo+Pj4gIAls
aXN0X3NwbGljZV90YWlsKGlvdmFfY29weSwgaW92YSk7Cj4+PiAgfQo+Pj4gKwo+Pj4gK3N0YXRp
YyB2b2lkIHZmaW9faW9tbXVfcmVsZWFzZV9uZXN0aW5nX2luZm8oc3RydWN0IHZmaW9faW9tbXUg
KmlvbW11KQo+Pj4gK3sKPj4+ICsJa2ZyZWUoaW9tbXUtPm5lc3RpbmdfaW5mbyk7Cj4+PiArCWlv
bW11LT5uZXN0aW5nX2luZm8gPSBOVUxMOwo+Pj4gK30KPj4+ICsKPj4+ICBzdGF0aWMgaW50IHZm
aW9faW9tbXVfdHlwZTFfYXR0YWNoX2dyb3VwKHZvaWQgKmlvbW11X2RhdGEsCj4+PiAgCQkJCQkg
c3RydWN0IGlvbW11X2dyb3VwICppb21tdV9ncm91cCkKPj4+ICB7Cj4+PiBAQCAtMTk1OSw2ICsx
OTcxLDEyIEBAIHN0YXRpYyBpbnQgdmZpb19pb21tdV90eXBlMV9hdHRhY2hfZ3JvdXAodm9pZAo+
PiAqaW9tbXVfZGF0YSwKPj4+ICAJCX0KPj4+ICAJfQo+Pj4KPj4+ICsJLyogTmVzdGluZyB0eXBl
IGNvbnRhaW5lciBjYW4gaW5jbHVkZSBvbmx5IG9uZSBncm91cCAqLwo+Pj4gKwlpZiAoaW9tbXUt
Pm5lc3RpbmcgJiYgQ09OVEFJTkVSX0hBU19ET01BSU4oaW9tbXUpKSB7Cj4+PiArCQltdXRleF91
bmxvY2soJmlvbW11LT5sb2NrKTsKPj4+ICsJCXJldHVybiAtRUlOVkFMOwo+Pj4gKwl9Cj4+PiAr
Cj4+PiAgCWdyb3VwID0ga3phbGxvYyhzaXplb2YoKmdyb3VwKSwgR0ZQX0tFUk5FTCk7Cj4+PiAg
CWRvbWFpbiA9IGt6YWxsb2Moc2l6ZW9mKCpkb21haW4pLCBHRlBfS0VSTkVMKTsKPj4+ICAJaWYg
KCFncm91cCB8fCAhZG9tYWluKSB7Cj4+PiBAQCAtMjAyOSw2ICsyMDQ3LDMyIEBAIHN0YXRpYyBp
bnQgdmZpb19pb21tdV90eXBlMV9hdHRhY2hfZ3JvdXAodm9pZAo+PiAqaW9tbXVfZGF0YSwKPj4+
ICAJaWYgKHJldCkKPj4+ICAJCWdvdG8gb3V0X2RvbWFpbjsKPj4+Cj4+PiArCS8qIE5lc3Rpbmcg
Y2FwIGluZm8gaXMgYXZhaWxhYmxlIG9ubHkgYWZ0ZXIgYXR0YWNoaW5nICovCj4+PiArCWlmIChp
b21tdS0+bmVzdGluZykgewo+Pj4gKwkJc3RydWN0IGlvbW11X25lc3RpbmdfaW5mbyB0bXAgPSB7
IC5zaXplID0gMCwgfTsKPj4+ICsKPj4+ICsJCS8qIEZpcnN0IGdldCB0aGUgc2l6ZSBvZiB2ZW5k
b3Igc3BlY2lmaWMgbmVzdGluZyBpbmZvICovCj4+PiArCQlyZXQgPSBpb21tdV9kb21haW5fZ2V0
X2F0dHIoZG9tYWluLT5kb21haW4sCj4+PiArCQkJCQkgICAgRE9NQUlOX0FUVFJfTkVTVElORywK
Pj4+ICsJCQkJCSAgICAmdG1wKTsKPj4+ICsJCWlmIChyZXQpCj4+PiArCQkJZ290byBvdXRfZGV0
YWNoOwo+Pj4gKwo+Pj4gKwkJaW9tbXUtPm5lc3RpbmdfaW5mbyA9IGt6YWxsb2ModG1wLnNpemUs
IEdGUF9LRVJORUwpOwo+Pj4gKwkJaWYgKCFpb21tdS0+bmVzdGluZ19pbmZvKSB7Cj4+PiArCQkJ
cmV0ID0gLUVOT01FTTsKPj4+ICsJCQlnb3RvIG91dF9kZXRhY2g7Cj4+PiArCQl9Cj4+PiArCj4+
PiArCQkvKiBOb3cgZ2V0IHRoZSBuZXN0aW5nIGluZm8gKi8KPj4+ICsJCWlvbW11LT5uZXN0aW5n
X2luZm8tPnNpemUgPSB0bXAuc2l6ZTsKPj4+ICsJCXJldCA9IGlvbW11X2RvbWFpbl9nZXRfYXR0
cihkb21haW4tPmRvbWFpbiwKPj4+ICsJCQkJCSAgICBET01BSU5fQVRUUl9ORVNUSU5HLAo+Pj4g
KwkJCQkJICAgIGlvbW11LT5uZXN0aW5nX2luZm8pOwo+Pj4gKwkJaWYgKHJldCkKPj4+ICsJCQln
b3RvIG91dF9kZXRhY2g7Cj4gCj4gZ2V0IG5lc3RpbmdfaW5mbyBmYWlsdXJlIHdpbGwgcmVzdWx0
IGluIGdyb3VwX2F0dGFjaCBmYWlsdXJlLlsxXQo+IAo+Pj4gKwl9Cj4+PiArCj4+PiAgCS8qIEdl
dCBhcGVydHVyZSBpbmZvICovCj4+PiAgCWlvbW11X2RvbWFpbl9nZXRfYXR0cihkb21haW4tPmRv
bWFpbiwgRE9NQUlOX0FUVFJfR0VPTUVUUlksCj4+ICZnZW8pOwo+Pj4KPj4+IEBAIC0yMTM4LDYg
KzIxODIsNyBAQCBzdGF0aWMgaW50IHZmaW9faW9tbXVfdHlwZTFfYXR0YWNoX2dyb3VwKHZvaWQK
Pj4gKmlvbW11X2RhdGEsCj4+PiAgCXJldHVybiAwOwo+Pj4KPj4+ICBvdXRfZGV0YWNoOgo+Pj4g
Kwl2ZmlvX2lvbW11X3JlbGVhc2VfbmVzdGluZ19pbmZvKGlvbW11KTsKPj4+ICAJdmZpb19pb21t
dV9kZXRhY2hfZ3JvdXAoZG9tYWluLCBncm91cCk7Cj4+PiAgb3V0X2RvbWFpbjoKPj4+ICAJaW9t
bXVfZG9tYWluX2ZyZWUoZG9tYWluLT5kb21haW4pOwo+Pj4gQEAgLTIzMzgsNiArMjM4Myw4IEBA
IHN0YXRpYyB2b2lkIHZmaW9faW9tbXVfdHlwZTFfZGV0YWNoX2dyb3VwKHZvaWQKPj4gKmlvbW11
X2RhdGEsCj4+PiAgCQkJCQl2ZmlvX2lvbW11X3VubWFwX3VucGluX2FsbChpb21tdSk7Cj4+PiAg
CQkJCWVsc2UKPj4+Cj4+IAl2ZmlvX2lvbW11X3VubWFwX3VucGluX3JlYWNjb3VudChpb21tdSk7
Cj4+PiArCj4+PiArCQkJCXZmaW9faW9tbXVfcmVsZWFzZV9uZXN0aW5nX2luZm8oaW9tbXUpOwo+
Pj4gIAkJCX0KPj4+ICAJCQlpb21tdV9kb21haW5fZnJlZShkb21haW4tPmRvbWFpbik7Cj4+PiAg
CQkJbGlzdF9kZWwoJmRvbWFpbi0+bmV4dCk7Cj4+PiBAQCAtMjU0Niw2ICsyNTkzLDMxIEBAIHN0
YXRpYyBpbnQgdmZpb19pb21tdV9taWdyYXRpb25fYnVpbGRfY2FwcyhzdHJ1Y3QKPj4gdmZpb19p
b21tdSAqaW9tbXUsCj4+PiAgCXJldHVybiB2ZmlvX2luZm9fYWRkX2NhcGFiaWxpdHkoY2Fwcywg
JmNhcF9taWcuaGVhZGVyLCBzaXplb2YoY2FwX21pZykpOwo+Pj4gIH0KPj4+Cj4+PiArc3RhdGlj
IGludCB2ZmlvX2lvbW11X2luZm9fYWRkX25lc3RpbmdfY2FwKHN0cnVjdCB2ZmlvX2lvbW11ICpp
b21tdSwKPj4+ICsJCQkJCSAgIHN0cnVjdCB2ZmlvX2luZm9fY2FwICpjYXBzKQo+Pj4gK3sKPj4+
ICsJc3RydWN0IHZmaW9faW5mb19jYXBfaGVhZGVyICpoZWFkZXI7Cj4+PiArCXN0cnVjdCB2Zmlv
X2lvbW11X3R5cGUxX2luZm9fY2FwX25lc3RpbmcgKm5lc3RpbmdfY2FwOwo+Pj4gKwlzaXplX3Qg
c2l6ZTsKPj4+ICsKPj4+ICsJc2l6ZSA9IG9mZnNldG9mKHN0cnVjdCB2ZmlvX2lvbW11X3R5cGUx
X2luZm9fY2FwX25lc3RpbmcsIGluZm8pICsKPj4+ICsJCWlvbW11LT5uZXN0aW5nX2luZm8tPnNp
emU7Cj4+PiArCj4+PiArCWhlYWRlciA9IHZmaW9faW5mb19jYXBfYWRkKGNhcHMsIHNpemUsCj4+
PiArCQkJCSAgIFZGSU9fSU9NTVVfVFlQRTFfSU5GT19DQVBfTkVTVElORywgMSk7Cj4+PiArCWlm
IChJU19FUlIoaGVhZGVyKSkKPj4+ICsJCXJldHVybiBQVFJfRVJSKGhlYWRlcik7Cj4+PiArCj4+
PiArCW5lc3RpbmdfY2FwID0gY29udGFpbmVyX29mKGhlYWRlciwKPj4+ICsJCQkJICAgc3RydWN0
IHZmaW9faW9tbXVfdHlwZTFfaW5mb19jYXBfbmVzdGluZywKPj4+ICsJCQkJICAgaGVhZGVyKTsK
Pj4+ICsKPj4+ICsJbWVtY3B5KCZuZXN0aW5nX2NhcC0+aW5mbywgaW9tbXUtPm5lc3RpbmdfaW5m
bywKPj4+ICsJICAgICAgIGlvbW11LT5uZXN0aW5nX2luZm8tPnNpemUpOwo+PiB5b3UgbXVzdCBj
aGVjayB3aGV0aGVyIG5lc3RpbmdfaW5mbyBpcyBub24gTlVMTCBiZWZvcmUgZG9pbmcgdGhhdC4K
PiAKPiBpdCdzIG5vdyB2YWxpZGF0ZWQgaW4gdGhlIGNhbGxlciBvZiB0aGlzIGZ1bmN0aW9uLiA6
LSkKYWggb2sgc29ycnkgSSBtaXNzZWQgdGhhdC4KPiAgCj4+IEJlc2lkZXMgSSBhZ3JlZSB3aXRo
IEplYW4gb24gdGhlIGZhY3QgaXQgbWF5IGJlIGJldHRlciB0byBub3QgcmVwb3J0IHRoZQo+PiBj
YXBhYmlsaXR5IGlmIG5lc3RlZCBpcyBub3Qgc3VwcG9ydGVkLgo+IAo+IEkgc2VlLiBpbiB0aGlz
IHBhdGNoLCBqdXN0IGZldyBsaW5lcyBiZWxvdyBbMl0sIHZmaW8gb25seSByZXBvcnRzIG5lc3Rp
bmcKPiBjYXAgd2hlbiBpb21tdS0+bmVzdGluZ19pbmZvIGlzIG5vbi1udWxsLiBzbyBldmVuIGlm
IHVzZXJzcGFjZSBzZWxlY3RlZAo+IG5lc3RpbmcgdHlwZSwgaXQgbWF5IGZhaWwgYXQgdGhlIFZG
SU9fU0VUX0lPTU1VIHBoYXNlIHNpbmNlIGdyb3VwX2F0dGFjaAo+IHdpbGwgYmUgZmFpbGVkIGZv
ciBORVNURUQgdHlwZSBjb250YWluZXIgaWYgaG9zdCBpb21tdSBkb2VzbuKAmXQgc3VwcG9ydAo+
IG5lc3RpbmcuIHRoZSBjb2RlIGlzIG1hcmtlZCBhcyBbMV0gaW4gdGhpcyBlbWFpbC4KT0sgdGhh
dCdzIGFscmVhZHkgdGhlcmUgdGhlbi4KClRoYW5rcwoKRXJpYwo+IAo+Pj4gKwo+Pj4gKwlyZXR1
cm4gMDsKPj4+ICt9Cj4+PiArCj4+PiAgc3RhdGljIGludCB2ZmlvX2lvbW11X3R5cGUxX2dldF9p
bmZvKHN0cnVjdCB2ZmlvX2lvbW11ICppb21tdSwKPj4+ICAJCQkJICAgICB1bnNpZ25lZCBsb25n
IGFyZykKPj4+ICB7Cj4+PiBAQCAtMjU4MSw2ICsyNjUzLDEyIEBAIHN0YXRpYyBpbnQgdmZpb19p
b21tdV90eXBlMV9nZXRfaW5mbyhzdHJ1Y3QKPj4gdmZpb19pb21tdSAqaW9tbXUsCj4+PiAgCWlm
ICghcmV0KQo+Pj4gIAkJcmV0ID0gdmZpb19pb21tdV9pb3ZhX2J1aWxkX2NhcHMoaW9tbXUsICZj
YXBzKTsKPj4+Cj4+PiArCWlmIChpb21tdS0+bmVzdGluZ19pbmZvKSB7Cj4+PiArCQlyZXQgPSB2
ZmlvX2lvbW11X2luZm9fYWRkX25lc3RpbmdfY2FwKGlvbW11LCAmY2Fwcyk7Cj4+PiArCQlpZiAo
cmV0KQo+Pj4gKwkJCXJldHVybiByZXQ7Cj4gCj4gaGVyZSBjaGVja3MgbmVzdGluZ19pbmZvIGJl
Zm9yZSByZXBvcnRpbmcgbmVzdGluZyBjYXAuIFsyXQo+IAo+Pj4gKwl9Cj4+PiArCj4+PiAgCW11
dGV4X3VubG9jaygmaW9tbXUtPmxvY2spOwo+Pj4KPj4+ICAJaWYgKHJldCkKPj4+IGRpZmYgLS1n
aXQgYS9pbmNsdWRlL3VhcGkvbGludXgvdmZpby5oIGIvaW5jbHVkZS91YXBpL2xpbnV4L3ZmaW8u
aAo+Pj4gaW5kZXggOTIwNDcwNS4uNDZhNzhhZiAxMDA2NDQKPj4+IC0tLSBhL2luY2x1ZGUvdWFw
aS9saW51eC92ZmlvLmgKPj4+ICsrKyBiL2luY2x1ZGUvdWFwaS9saW51eC92ZmlvLmgKPj4+IEBA
IC0xNCw2ICsxNCw3IEBACj4+Pgo+Pj4gICNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgo+Pj4gICNp
bmNsdWRlIDxsaW51eC9pb2N0bC5oPgo+Pj4gKyNpbmNsdWRlIDxsaW51eC9pb21tdS5oPgo+Pj4K
Pj4+ICAjZGVmaW5lIFZGSU9fQVBJX1ZFUlNJT04JMAo+Pj4KPj4+IEBAIC0xMDM5LDYgKzEwNDAs
MjQgQEAgc3RydWN0IHZmaW9faW9tbXVfdHlwZTFfaW5mb19jYXBfbWlncmF0aW9uIHsKPj4+ICAJ
X191NjQJbWF4X2RpcnR5X2JpdG1hcF9zaXplOwkJLyogaW4gYnl0ZXMgKi8KPj4+ICB9Owo+Pj4K
Pj4+ICsvKgo+Pj4gKyAqIFRoZSBuZXN0aW5nIGNhcGFiaWxpdHkgYWxsb3dzIHRvIHJlcG9ydCB0
aGUgcmVsYXRlZCBjYXBhYmlsaXR5Cj4+PiArICogYW5kIGluZm8gZm9yIG5lc3RpbmcgaW9tbXUg
dHlwZS4KPj4+ICsgKgo+Pj4gKyAqIFRoZSBzdHJ1Y3R1cmVzIGJlbG93IGRlZmluZSB2ZXJzaW9u
IDEgb2YgdGhpcyBjYXBhYmlsaXR5Lgo+Pj4gKyAqCj4+PiArICogVXNlciBzcGFjZSBzZWxlY3Rl
ZCBWRklPX1RZUEUxX05FU1RJTkdfSU9NTVUgdHlwZSBzaG91bGQgY2hlY2sKPj4+ICsgKiB0aGlz
IGNhcHRvIGdldCBzdXBwb3J0ZWQgZmVhdHVyZXMuCj4+IHMvY2FwdG8vY2FwYWJpbGl0eSB0byBn
ZXQKPiAKPiBnb3QgaXQuCj4gCj4gUmVnYXJkcywKPiBZaSBMaXUKPiAKPj4+ICsgKgo+Pj4gKyAq
IEBpbmZvOiB0aGUgbmVzdGluZyBpbmZvIHByb3ZpZGVkIGJ5IElPTU1VIGRyaXZlci4KPj4+ICsg
Ki8KPj4+ICsjZGVmaW5lIFZGSU9fSU9NTVVfVFlQRTFfSU5GT19DQVBfTkVTVElORyAgMwo+Pj4g
Kwo+Pj4gK3N0cnVjdCB2ZmlvX2lvbW11X3R5cGUxX2luZm9fY2FwX25lc3Rpbmcgewo+Pj4gKwlz
dHJ1Y3QJdmZpb19pbmZvX2NhcF9oZWFkZXIgaGVhZGVyOwo+Pj4gKwlzdHJ1Y3QgaW9tbXVfbmVz
dGluZ19pbmZvIGluZm87Cj4+PiArfTsKPj4+ICsKPj4+ICAjZGVmaW5lIFZGSU9fSU9NTVVfR0VU
X0lORk8gX0lPKFZGSU9fVFlQRSwgVkZJT19CQVNFICsgMTIpCj4+Pgo+Pj4gIC8qKgo+Pj4KPj4K
Pj4gVGhhbmtzCj4+Cj4+IEVyaWMKPiAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmlvbW11IG1haWxpbmcgbGlzdAppb21tdUBsaXN0cy5saW51eC1mb3Vu
ZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0
aW5mby9pb21tdQ==
