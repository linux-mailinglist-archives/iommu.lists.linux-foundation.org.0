Return-Path: <iommu-bounces@lists.linux-foundation.org>
X-Original-To: lists.iommu@lfdr.de
Delivered-To: lists.iommu@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id 998BA6E6AF
	for <lists.iommu@lfdr.de>; Fri, 19 Jul 2019 15:41:18 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id D696F2628;
	Fri, 19 Jul 2019 13:41:16 +0000 (UTC)
X-Original-To: iommu@lists.linux-foundation.org
Delivered-To: iommu@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 5047C21A7
	for <iommu@lists.linux-foundation.org>;
	Fri, 19 Jul 2019 13:41:04 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from impout003.msg.chrl.nc.charter.net
	(impout003aa.msg.chrl.nc.charter.net [47.43.20.27])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 8E0A512E
	for <iommu@lists.linux-foundation.org>;
	Fri, 19 Jul 2019 13:41:03 +0000 (UTC)
Received: from [10.10.100.101] ([24.236.195.206]) by cmsmtp with ESMTPA
	id oT89hWowknJPnoT8Ahb6dD; Fri, 19 Jul 2019 13:41:02 +0000
Authentication-Results: charter.net; none
X-Authority-Analysis: v=2.3 cv=aafVYigt c=1 sm=1 tr=0
	a=mQKZifbrf9Y32dM5lNTaRA==:117 a=mQKZifbrf9Y32dM5lNTaRA==:17
	a=jpOVt7BSZ2e4Z31A5e1TngXxSK0=:19 a=IkcTkHD0fZMA:10 a=8AirrxEcAAAA:8
	a=3fyaaF4VAAAA:8 a=PpU-1FReYyRXRzzdOEwA:9 a=BEJlCVAyJGDuB6IR:21
	a=BFc33YERzEAK_XSN:21 a=QEXdDO2ut3YA:10 a=ST-jHhOKWsTCqRlWije3:22
	a=jOuFdahVONy5WApiBME_:22
Subject: Re: x86-64 kernel dma issue; bisected
From: Al Farleigh <AWFour@charter.net>
To: iommu@lists.linux-foundation.org
References: <c04211d3-5e4a-daa2-4410-88c8c84e5735@charter.net>
Message-ID: <dc4d124d-b61f-6610-4b36-a0ad129a7dba@charter.net>
Date: Fri, 19 Jul 2019 09:41:01 -0400
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
	Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <c04211d3-5e4a-daa2-4410-88c8c84e5735@charter.net>
Content-Language: en-US
X-CMAE-Envelope: MS4wfFJiX2k5JrhCk/wMsNgrWXEOKBZQXn6/j61beslHYNaxnhc08ZDeRSp4sQdwQEnXFrarlISkqd9mTColA+EXXxqQirc5bwbevGfkr3DGRVHr7xJ/UR0P
	7cuycKhvB79UNFtePj5mA+4SCNLy+FRQjBIKXjRALVxdImDzLAadmeoiKV9fzTqZWtIvlMWcT5jmhg==
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,FREEMAIL_FROM
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
X-BeenThere: iommu@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Development issues for Linux IOMMU support
	<iommu.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/iommu>,
	<mailto:iommu-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/iommu/>
List-Post: <mailto:iommu@lists.linux-foundation.org>
List-Help: <mailto:iommu-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/iommu>,
	<mailto:iommu-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Sender: iommu-bounces@lists.linux-foundation.org
Errors-To: iommu-bounces@lists.linux-foundation.org

VGhlIHBhdGNoIHNlbnQgaW4gdGhlIGJlbG93IHRocmVhZCBmaXhlZCB0aGUgcHJvYmxlbSBpbiBr
ZXJuZWwgdjUuMiBvbiAKbXkgc3lzdGVtLgoKQSBzaW5jZXJlIFRoYW5rIFlvdSB0byBldmVyeW9u
ZSB3aG8ganVtcGVkIGluIHRvIGhlbHAsIHVzaW5nIHRoZWlyIAp2YWx1YWJsZSB0aW1lIG9uIHRo
aXMgb2JzY3VyZSBpc3N1ZS4KCkJlc3QgUmVnYXJkcywKQWxmcmVkIEZhcmxlaWdoCgotLS0tCgpS
ZTogW1BBVENIIGRtYSAxLzFdIGRtYS1kaXJlY3Q6IGNvcnJlY3QgdGhlIHBoeXNpY2FsIGFkZHIg
aW4gCmRtYV9kaXJlY3Rfc3luY19zZ19mb3JfY3B1L2RldmljZQoKCkZpeGVzOiA1NTg5N2FmNjMw
OTEoImRtYS1kaXJlY3Q6IG1lcmdlIHN3aW90bGJfZG1hX29wcyBpbnRvIHRoZSAKZG1hX2RpcmVj
dCBjb2RlIikKU2lnbmVkLW9mZi1ieTogRnVnYW5nIER1YW4gPGZ1Z2FuZy5kdWFuQG54cC5jb20+
Ci0tLQogICBrZXJuZWwvZG1hL2RpcmVjdC5jIHwgMTggKysrKysrKysrKystLS0tLS0tCiAgIDEg
ZmlsZSBjaGFuZ2VkLCAxMSBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2tlcm5lbC9kbWEvZGlyZWN0LmMgYi9rZXJuZWwvZG1hL2RpcmVjdC5jCmluZGV4IGI5MGUx
YWUuLjBlODdmODYgMTAwNjQ0Ci0tLSBhL2tlcm5lbC9kbWEvZGlyZWN0LmMKKysrIGIva2VybmVs
L2RtYS9kaXJlY3QuYwpAQCAtMjQyLDEyICsyNDIsMTQgQEAgdm9pZCBkbWFfZGlyZWN0X3N5bmNf
c2dfZm9yX2RldmljZShzdHJ1Y3QgZGV2aWNlICpkZXYsCiAgICAgICBpbnQgaTsKICAgICAgICAg
Zm9yX2VhY2hfc2coc2dsLCBzZywgbmVudHMsIGkpIHsKLSAgICAgICAgaWYgKHVubGlrZWx5KGlz
X3N3aW90bGJfYnVmZmVyKHNnX3BoeXMoc2cpKSkpCi0gICAgICAgICAgICBzd2lvdGxiX3RibF9z
eW5jX3NpbmdsZShkZXYsIHNnX3BoeXMoc2cpLCBzZy0+bGVuZ3RoLAorICAgICAgICBwaHlzX2Fk
ZHJfdCBwYWRkciA9IGRtYV90b19waHlzKGRldiwgc2dfZG1hX2FkZHJlc3Moc2cpKTsKKworICAg
ICAgICBpZiAodW5saWtlbHkoaXNfc3dpb3RsYl9idWZmZXIocGFkZHIpKSkKKyAgICAgICAgICAg
IHN3aW90bGJfdGJsX3N5bmNfc2luZ2xlKGRldiwgcGFkZHIsIHNnLT5sZW5ndGgsCiAgICAgICAg
ICAgICAgICAgICAgICAgZGlyLCBTWU5DX0ZPUl9ERVZJQ0UpOwogICAgICAgICAgICAgaWYgKCFk
ZXZfaXNfZG1hX2NvaGVyZW50KGRldikpCi0gICAgICAgICAgICBhcmNoX3N5bmNfZG1hX2Zvcl9k
ZXZpY2UoZGV2LCBzZ19waHlzKHNnKSwgc2ctPmxlbmd0aCwKKyAgICAgICAgICAgIGFyY2hfc3lu
Y19kbWFfZm9yX2RldmljZShkZXYsIHBhZGRyLCBzZy0+bGVuZ3RoLAogICAgICAgICAgICAgICAg
ICAgICAgIGRpcik7CiAgICAgICB9CiAgIH0KQEAgLTI3OSwxMSArMjgxLDEzIEBAIHZvaWQgZG1h
X2RpcmVjdF9zeW5jX3NnX2Zvcl9jcHUoc3RydWN0IGRldmljZSAqZGV2LAogICAgICAgaW50IGk7
CiAgICAgICAgIGZvcl9lYWNoX3NnKHNnbCwgc2csIG5lbnRzLCBpKSB7CisgICAgICAgIHBoeXNf
YWRkcl90IHBhZGRyID0gZG1hX3RvX3BoeXMoZGV2LCBzZ19kbWFfYWRkcmVzcyhzZykpOworCiAg
ICAgICAgICAgaWYgKCFkZXZfaXNfZG1hX2NvaGVyZW50KGRldikpCi0gICAgICAgICAgICBhcmNo
X3N5bmNfZG1hX2Zvcl9jcHUoZGV2LCBzZ19waHlzKHNnKSwgc2ctPmxlbmd0aCwgZGlyKTsKLQot
ICAgICAgICBpZiAodW5saWtlbHkoaXNfc3dpb3RsYl9idWZmZXIoc2dfcGh5cyhzZykpKSkKLSAg
ICAgICAgICAgIHN3aW90bGJfdGJsX3N5bmNfc2luZ2xlKGRldiwgc2dfcGh5cyhzZyksIHNnLT5s
ZW5ndGgsIGRpciwKKyAgICAgICAgICAgIGFyY2hfc3luY19kbWFfZm9yX2NwdShkZXYsIHBhZGRy
LCBzZy0+bGVuZ3RoLCBkaXIpOworCisgICAgICAgIGlmICh1bmxpa2VseShpc19zd2lvdGxiX2J1
ZmZlcihwYWRkcikpKQorICAgICAgICAgICAgc3dpb3RsYl90Ymxfc3luY19zaW5nbGUoZGV2LCBw
YWRkciwgc2ctPmxlbmd0aCwgZGlyLAogICAgICAgICAgICAgICAgICAgICAgIFNZTkNfRk9SX0NQ
VSk7CiAgICAgICB9CgoKCk9uIDcvMTYvMTkgMTA6NDMgUE0sIEFsIEZhcmxlaWdoIHdyb3RlOgo+
IHJlOiB0aGUgZG1hLWRpcmVjdCBjb2RlIGNvbW1pdCBiZWxvdwo+IAo+IEkgaGF2ZSBiaXNlY3Rl
ZCB0aGUga2VybmVsIHRvIGlzb2xhdGUgYSBQQ0kgYm9hcmQgcHJvYmxlbSBvbiBteSBBTUQgCj4g
eDg2LTY0IEFTUk9DSyBzeXN0ZW0uIFRoZSBib2FyZCB3b3JrZWQgYXQgKEZlZG9yYSBrZXJuZWwp
IDQuMTguMTYgYnV0IAo+IHN0b3BwZWQgd2hlbiBtb3ZpbmcgdG8gKEZlZG9yYSBrZXJuZWwpIDUu
MC4gSSB0aGVuIHVzZWQgCj4gKGdpdC90b3J2YWxkcy9saW51eCkgNC4yMC1yYzQgb3Igc28gdG8g
bG9jYXRlIHRoZSBmYXVsdCB2aWEgYmlzZWN0Lgo+IAo+IEkgbm93IGhhdmUgdHdvIGtlcm5lbHMs
IGdvb2QvYmFkLCB0aGF0IHN0cmFkZGxlIHRoZSBjb21taXQuCj4gCj4gSSB3YXMgYXNrZWQgdG8g
dHJ5IHY1LjIganVzdCBpbiBjYXNlIGl0IHdhcyBmaXhlZDsgSSBjb21waWxlZCBpdCBhbmQgdGhl
IAo+IGZhdWx0IGFwcGVhcnMgdG8gc3RpbGwgYmUgcHJlc2VudC4KPiAKPiBTaW1wbHksIG1wZWcg
dmlkZW8gZG9lcyBub3Qgc3RyZWFtIGZyb20gYm9hcmQ7IG5vIGVycm9ycywgYnV0IG5vIHZpZGVv
Lgo+IAo+IE15IHdvcmsgaXMgZG9jdW1lbnRlZCBhdAo+IGh0dHBzOi8vYnVncy5rZGUub3JnL3No
b3dfYnVnLmNnaT9pZD00MDgwMDQKPiAKPiBpbmNsdWRpbmcgZG1lc2dzLCBsc3BjaXMsIGFuZCAo
c2Vjb25kKSBnaXQgYmlzZWN0IGxvZy4KPiAKPiBDb3VsZCBJIHBsZWFzZSBhc2sgaWYgYW5kIHdo
ZXJlIEkgc2hvdWxkIHN1Ym1pdCBhIGJ1Zz8gYW5kIGFtIHdpbGxpbmcgdG8gCj4gYXNzaXN0IGlm
IEkgY2FuLgo+IAo+IFRoYW5rIFlvdSEKPiAKPiAKPiAtLS0tLQo+IAo+IGNvbW1pdCA1NTg5N2Fm
NjMwOTFlYmMyYzNmMjM5YzZhNjY2NmY3NDgxMTNhYzUwCj4gQXV0aG9yOiBDaHJpc3RvcGggSGVs
bHdpZyA8aGNoQGxzdC5kZT4KPiBEYXRlOsKgwqAgTW9uIERlYyAzIDExOjQzOjU0IDIwMTggKzAx
MDAKPiAKPiAgwqDCoMKgIGRtYS1kaXJlY3Q6IG1lcmdlIHN3aW90bGJfZG1hX29wcyBpbnRvIHRo
ZSBkbWFfZGlyZWN0IGNvZGUKPiAKPiAgwqDCoMKgIFdoaWxlIHRoZSBkbWEtZGlyZWN0IGNvZGUg
aXMgKHJlbGF0aXZlbHkpIGNsZWFuIGFuZCBzaW1wbGUgd2UKPiAgwqDCoMKgIGFjdHVhbGx5IGhh
dmUgdG8gdXNlIHRoZSBzd2lvdGxiIG9wcyBmb3IgdGhlIG1hcHBpbmcgb24gbWFueQo+ICDCoMKg
wqAgYXJjaGl0ZWN0dXJlcyBkdWUgdG8gZGV2aWNlcyB3aXRoIGFkZHJlc3NpbmcgbGltaXRzLsKg
IEluc3RlYWQKPiAgwqDCoMKgIG9mIGtlZXBpbmcgdHdvIGltcGxlbWVudGF0aW9ucyBhcm91bmQg
dGhpcyBjb21taXQgYWxsb3dzIHRoZQo+ICDCoMKgwqAgZG1hLWRpcmVjdCBpbXBsZW1lbnRhdGlv
biB0byBjYWxsIHRoZSBzd2lvdGxiIGJvdW5jZSBidWZmZXJpbmcKPiAgwqDCoMKgIGZ1bmN0aW9u
cyBhbmQgdGh1cyBzaGFyZSB0aGUgZ3V0cyBvZiB0aGUgbWFwcGluZyBpbXBsZW1lbnRhdGlvbi4K
PiAgwqDCoMKgIFRoaXMgYWxzbyBzaW1wbGlmaWVkIHRoZSBkbWEtbWFwcGluZyBzZXR1cCBvbiBh
IGZldyBhcmNoaXRlY3R1cmVzCj4gIMKgwqDCoCB3aGVyZSB3ZSBkb24ndCBoYXZlIHRvIGRpZmZl
cmVuY2lhdGUgd2hpY2ggaW1wbGVtZW50YXRpb24gdG8gdXNlLgo+IAo+IAo+IAo+IAo+IAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KaW9tbXUgbWFpbGlu
ZyBsaXN0CmlvbW11QGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGlu
dXhmb3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2lvbW11
